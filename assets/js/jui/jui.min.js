!function(){function _(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function l(e,n){function s(e){return d+=e.split(/\n/).length-1,i&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=h[1]+_(e)+h[2]+"\n"),e}function a(e){var t=d;if(r?e=r(e,n):l&&(e=e.replace(/\n/g,function(){return"$line="+ ++d+";"})),0===e.indexOf("=")){var i=u&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),i){var s=e.replace(/\s*\([^\)]+\)/,"");$[s]||/^(include|print)$/.test(s)||(e="$escape("+e+")")}else e="$string("+e+")";e=h[1]+e+h[2]}return l&&(e="$line="+t+";"+e),w(e.replace(F,"").replace(I,",").replace(T,"").replace(D,"").replace(E,"").split(k),function(e){var t;e&&!p[e]&&(t="print"===e?f:"include"===e?g:$[e]?"$utils."+e:x[e]?"$helpers."+e:"$data."+e,v+=e+"="+t+",",p[e]=!0)}),e+"\n"}var l=n.debug,t=n.openTag,o=n.closeTag,r=n.parser,i=n.compress,u=n.escape,d=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},c="".trim,h=c?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],m=c?"$out+=text;return $out;":"$out.push(text);",f="function(){var text=''.concat.apply('',arguments);"+m+"}",g="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+m+"}",v="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(l?"$line=0,":""),j=h[0],y="return new String("+h[3]+");";w(e.split(t),function(e){var t=(e=e.split(o))[0],i=e[1];1===e.length?j+=s(t):(j+=a(t),i&&(j+=s(i)))});var b=v+j+y;l&&(b="try{"+b+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+_(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var C=new Function("$data","$filename",b);return C.prototype=$,C}catch(e){throw e.temp="function anonymous($data,$filename) {"+b+"}",e}}var g=function(e,t){return"string"==typeof t?d(t,{filename:e}):i(e,t)};g.version="3.0.0",g.config=function(e,t){o[e]=t};var o=g.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},r=g.cache={};g.render=function(e,t){return d(e,t)};var i=g.renderFile=function(e,t){var i=g.get(e)||u({filename:e,name:"Render Error",message:"Template not found"});return t?i(t):i};g.get=function(e){var t;if(r[e])t=r[e];else if("object"==typeof document){var i=document.getElementById(e);if(i){var s=(i.value||i.innerHTML).replace(/^\s*|\s*$/g,"");t=d(s,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&("number"===(t=typeof e)?e+="":e="function"===t?s(e.call(e)):""),e},t={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},n=function(e){return t[e]},a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},$=g.utils={$helpers:{},$include:i,$string:s,$escape:function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,n)},$each:function(e,t){var i,s;if(a(e))for(i=0,s=e.length;i<s;i++)t.call(e,e[i],i,e);else for(i in e)t.call(e,e[i],i)}};g.helper=function(e,t){x[e]=t};var x=g.helpers=$.$helpers;g.onerror=function(e){var t="Template Error\n\n";for(var i in e)t+="<"+i+">\n"+e[i]+"\n\n";"object"==typeof console&&console.error(t)};var u=function(e){return g.onerror(e),function(){return"{Template Error}"}},d=g.compile=function(i,s){function e(t){try{return new a(t,n)+""}catch(e){return s.debug?u(e)():(s.debug=!0,d(i,s)(t))}}for(var t in s=s||{},o)void 0===s[t]&&(s[t]=o[t]);var n=s.filename;try{var a=l(i,s)}catch(i){return i.filename=n||"anonymous",i.name="Syntax Error",u(i)}return e.prototype=a.prototype,e.toString=function(){return a.toString()},n&&s.cache&&(r[n]=e),e},w=$.$each,F=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,I=/[^\w$]+/g,T=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),D=/^\d[^,]*|,\d[^,]*/g,E=/^,+|,+$/g,k=/^$|,+/;o.openTag="{{",o.closeTag="}}";o.parser=function(e,t){var i,s,n,a,l,o=(e=e.replace(/^\s/,"")).split(" "),r=o.shift(),u=o.join(" ");switch(r){case"if":e="if("+u+"){";break;case"else":e="}else"+(o="if"===o.shift()?" if("+o.join(" ")+")":"")+"{";break;case"/if":e="}";break;case"each":var d=o[0]||"$data";"as"!==(o[1]||"as")&&(d="[]"),e="$each("+d+",function("+((o[2]||"$value")+","+(o[3]||"$index"))+"){";break;case"/each":e="});";break;case"echo":e="print("+u+");";break;case"print":case"include":e=r+"("+o.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(u)){var p=!0;0===e.indexOf("#")&&(e=e.substr(1),p=!1);for(var c=0,h=e.split("|"),m=h.length,f=h[c++];c<m;c++)i=f,s=h[c],l=n=void 0,n=s.split(":"),a=n.shift(),(l=n.join(":")||"")&&(l=", "+l),f="$helpers."+a+"("+i+l+")";e=(p?"=":"=#")+f}else e=g.helpers[r]?"=#"+r+"("+o.join(",")+");":"="+e}return e},"function"==typeof define?define("jui/template",[],function(){return g}):"undefined"!=typeof exports?module.exports=g:this.template=g}(),function(e){"function"==typeof define&&define.amd?define("jui/utils",["jquery","jui/template"],e):e(jQuery,template)}(function(d,i){var a;String.prototype.trim=function(e){return this.replace(new RegExp("^"+e+"+|"+e+"+$","g"),"")},String.prototype.prepend=function(e){return this[0]!=e?(e+this).toString():this.toString()},d.jui=d.jui||{},d.jui.template=i,d.jui.tmpl=function(e,t){return/[^\w\-\.:]/.test(e)?i.compile(e)(t):i(e,t)},d.jui.utils=d.jui.utils||{},d.jui.utils.isJqObj=function(e){return!!(e&&e.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&e instanceof jQuery)},d.jui.utils.pathCombine=function(){var i="",e=d.makeArray(arguments);return d.each(e,function(e,t){i+=0<e?"/"+t.trim("/"):t.trim("/")}),i},d.jui.utils.parseUrl=function(e){var a={},t="",i=e.indexOf("?"),s="";if(""!=e)if(-1<i){t=e.substring(0,i);var n=e.substring(i+1),l=(s=n).split("&");d.each(l,function(e,t){var i,s,n=t.split("=");i=n[0],s=n[1],""!==i&&(a[i]=decodeURIComponent(s))})}else t=e;return{url:e,path:t,query:a,queryStr:s}},d.jui.utils.format=function(i,e){return 1==arguments.length?function(){var e=d.makeArray(arguments);return e.unshift(i),d.format.apply(this,e)}:(2<arguments.length&&e.constructor!=Array&&(e=d.makeArray(arguments).slice(1)),e.constructor!=Array&&(e=[e]),d.each(e,function(e,t){i=i.replace(new RegExp("\\{"+e+"\\}","g"),t)}),i)},d.jui.utils.formatDate=function(){var e=!0,t=arguments[0],i=arguments[1]||"yyyy-MM-dd hh:mm:ss";if("boolean"==typeof t&&(e=t,t=arguments[1],i=arguments[2]||"yyyy-MM-dd hh:mm:ss"),t){var s;if(new Date,t instanceof Date)s=t;else if("number"==typeof t)s=new Date(t);else if("object"==d.type(t)){var n=t.format;t=t.date}else{if("string"!=typeof t)return;if(/Date/.test(t)||!isNaN(t))t=t.replace(/(^\/Date\()|(\)\/$)/g,""),t=parseInt(t),e&&(t-=-288e5),s=new Date(t);else if(/\d{4}.\d{2}.\d{2}/.test(t)){var a=/.*?(\d{1,2}):(\d{1,2}):(\d{1,2})/,l=t.replace(/(\d{4}).(\d{2}).(\d{2}).*/,"$1,$2,$3").split(","),o=[];a.test(t)&&(o=t.replace(a,"$1,$2,$3").split(",")),s=new Date(l[0],l[1]-1,l[2],o[0]||0,o[1]||0,o[2]||0)}else{if(!/\:/.test(t))return t;n=t.split(":")[1];t=t.split(":")[0],"dmy"==n?t=t.replace(/(\d{1,2})([\s\/])(\d{1,2})\2(\d{2,4})/,"$3$2$1$2$4"):"ydm"==n&&(t=t.replace(/(\d{2,4})([\s\/\-])(\d{1,2})\2(\d{1,2})/,"$1$2$4$2$3")),s=new Date(t),e||(t=s.getTime()+-288e5,s=new Date(t))}}var r={"M+":s.getMonth()+1,"d+":s.getDate(),"W+":["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][s.getDay()],"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(var u in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+u+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?r[u]:("00"+r[u]).substr((""+r[u]).length)));return i}},d.jui.utils.jsonEqual=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},d.jui.utils.htmlEncode=function(e){return d("<div/>").text(e).html()},d.jui.utils.htmlDecode=function(e){return d("<div/>").html(e).text()},d.jui.utils.getFirstLeaf=function(e,t){t=t||"children";var i=null;if(0<e.length){i=e[0];var s=e[0][t];s&&0<s.length&&(i=d.jui.utils.getFirstLeaf.getFirstLeaf(s))}return i},d.jui.template.helper("formatDate",function(e,t){return t=t||"yyyy-MM-dd",d.jui.utils.formatDate(!1,e,t)}),d.fn.findByName=function(e){return this.find('[name="'+e+'"]')},d.fn.findUntil=function(e,t,n){return n=void 0!==n?n:new jQuery,this.children().each(function(){var i=jQuery(this);i.is(e)&&n.push(this);var s=!1;d.isArray(t)?d.each(t,function(e,t){if(i.is(t))return!(s=!0)}):i.is(t)&&(s=!0),s||i.findUntil(e,t,n)}),n},d.fn.equalHeights=function(){var t=0,e=d(this);return e.each(function(){var e=d(this).outerHeight();t<e&&(t=e)}),e.css("height",t)},d.jui.event=(a={},{on:function(e,t){a[e]||(a[e]=[]),a[e].push(t)},off:function(e,t){var i=a[e];if(i){for(var s=-1,n=0;n<i.length;n++)if(i[n]===t){s=n;break}s<0||a[e].splice(s,1)}},trigger:function(e){var t=a[e];if(t&&t.length)for(var i=Array.prototype.slice.call(arguments,1),s=0;s<t.length;s++)t[s].apply(this,i)}}),d.fn.emulateTransitionEnd=function(e){var t=!1,i=this;d(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||d(i).trigger(d.support.transition.end)},e),this},d.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),d.support.transition&&(d.event.special.bsTransitionEnd={bindType:d.support.transition.end,delegateType:d.support.transition.end,handle:function(e){if(d(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}),function(t){"use strict";if(!t.origin){var i=t.protocol+"//"+t.hostname+(t.port&&":"+t.port);try{Object.defineProperty(t,"origin",{enumerable:!0,value:i})}catch(e){t.origin=i}}}(window.location)}),function(e){"function"==typeof define&&define.amd?define("jui/mixins/compositMixin",["jquery","jqueryui","../utils"],e):e(jQuery)}(function(o){o.jui.compositMixin={options:{components:[],transmitOptions:null},_getComponents:function(){o.isFunction(this.options.components)?this.components=this.options.components.call(this):this.components=this.options.components,this.components||(this.compoents=[])},_renderChildren:function(){var e=this.options;if(this._getComponents(),this.components&&this.components.length)for(var t=0;t<this.components.length;t++){var i=this.components[t],s=this._findByIdOrName(i.name);if(s.length)if(i.widget){e.transmitOptions&&(i=o.extend(!0,{},e.transmitOptions,i));var n,a=null;if(e.transmitData&&this.data&&!o.isEmptyObject(this.data)&&(i.flatData?a=this.data:this.data.hasOwnProperty(i.name)&&(a=this.data[i.name]),void 0===i.data&&(i.data=a)),0<(i=o.extend(!0,{},i,{properties:{name:i.name,parent:this}})).widget.indexOf(".")){var l=i.widget.split(".");n=o[l[0]][l[1]]}else n=o.jui[i.widget];n&&(this["$"+i.name]=n(i,s))}else this["_$"+i.name]=s}},findChild:function(e){if(this.components&&this.components.length)for(var t=0;t<this.components.length;t++){if(this.components[t].name==e)return this["$"+e]}return null}}}),function(e){"function"==typeof define&&define.amd?define("jui/mixins/dataMixin",["jquery","jqueryui","../utils"],e):e(jQuery)}(function(l){l.jui.dataMixin={options:{data:null,dataUrl:null,dataParams:{},dataAjax:{type:"GET",dataType:"json"},dataProcessor:null},_getData:function(t,e){var i=this,s=this.options;this.gettingData=!0,this._fetchData(e).done(function(e){i.data=e,i.data&&i.data.__laf&&(i.data=i.data.Data),l.isFunction(s.dataProcessor)&&(i.data=s.dataProcessor.call(this,e)),i.gettingData=!1,t.call(i)})},_fetchData:function(s){var n=this,a=this.options;return l.Deferred(function(t){if(null!=a.data&&null!=a.data){if(!l.isFunction(a.data))return t.resolve(a.data);var e=a.data.call(n);if(!e.done)return t.resolve(e);e.done(function(e){return t.resolve(e)})}else{if(!a.dataUrl)return t.resolve(null);l.isFunction(a.dataUrl)?a.dataAjax.url=a.dataUrl.call(n):a.dataAjax.url=a.dataUrl;var i=a.dataParams;if(l.isFunction(a.dataParams)&&(i=a.dataParams.call(n)),null!=s&&(i=l.extend({},i,s)),!a.dataAjax.url)return t.resolve(null);null==i||"application/json"!=a.dataAjax.contentType||l.isPlainObject(i)&&l.isEmptyObject(i)?a.dataAjax.data=i:a.dataAjax.data=JSON.stringify(i),l.ajax(a.dataAjax).done(function(e){return t.resolve(e)})}})}}}),function(e){"function"==typeof define&&define.amd?define("jui/mixins/templateMixin",["jquery","jqueryui","text","../utils"],e):e(jQuery)}(function(t){t.jui.templateMixin={options:{template:null,templateUrl:null},_getTemplate:function(t){var i=this,s=this.options;this._fetchTemplate().done(function(e){i.template=e,s.templateProcessor&&(i.template=s.templateProcessor.call(i,e)),t.call(i)})},_fetchTemplate:function(e){var i=this,s=this.options;return t.Deferred(function(t){if(s.templateUrl)require(["text!/"+s.templateUrl],function(e){t.resolve(e)});else if(s.template)t.resolve(s.template);else{if(!i.elemTmpl){var e=i._find("script");e.length&&(i.elemTmpl=e.html())}t.resolve(i.elemTmpl)}})}}}),function(e){"function"==typeof define&&define.amd?define("jui/jcomponent",["jquery","jqueryui","./utils"],e):e(jQuery)}(function(t){t.widget("jui.jcomponent",{options:{renderIf:!0,showIf:!0,properties:null},_beforeCreate:t.noop,_beforeRender:t.noop,_afterRender:t.noop,_render:t.noop,_refresh:t.noop,_create:function(){var i=this,e=this.options;e.properties&&t.each(e.properties,function(e,t){i[e]=t}),this.__beforeCreate(),this.showIf=e.showIf,t.isFunction(e.showIf)&&(this.showIf=e.showIf.call(i)),0==this.showIf&&this.element.hide(),this.renderIf=e.showIf,t.isFunction(e.renderIf)&&(this.renderIf=e.renderIf.call(i)),e.renderIf&&this.__render()},show:function(){this._show(this.widget())},hide:function(){this._hide(this.widget())},__render:function(){var e=this.options;1!=this.rendered&&(this.rendered=!0,null!=e.styleClass&&this.element.addClass(e.styleClass),null!=e.style&&this.element.css(e.style),this._render(),this.options.disabled&&this.disable(),e.events&&this._on(e.events))},refresh:function(e){this.options=t.extend(!0,this.options,e),this.rendered?this._refresh():this.__render()},_refresh:function(){this.element.html(""),this.rendered=!1,this.__render()},_findByIdOrName:function(e){var t=this.widget().find("#"+e);return t.length||(t=this.widget().findByName(e)),t},_find:function(e){return this.widget().find(e)},_getCreateEventData:function(){return{inst:this}},__beforeCreate:function(){t.isFunction(this.options.beforeCreate)&&this.options.beforeCreate.call(this),this._beforeCreate()},__beforeRender:function(){t.isFunction(this.options.beforeRender)&&this.options.beforeRender.call(this),this._beforeRender()},__afterRender:function(){t.isFunction(this.options.afterRender)&&this.options.afterRender.call(this),this._afterRender()},isHidden:function(){return this.widget().is(":hidden")},isDisabled:function(){return this.options.disabled},on:function(e,i){var s=this,t=this.widgetEventPrefix.toLowerCase();e=e.toLowerCase(),this.element.bind(t+e,function(e,t){i.call(s,e,t)})}})}),function(e){"function"==typeof define&&define.amd?define("jui/jtmpl",["jquery","jqueryui","./utils","./jcomponent","./mixins/templateMixin","./mixins/dataMixin","./mixins/compositMixin"],e):e(jQuery)}(function(s){s.widget("jui.jtmpl",s.jui.jcomponent,s.extend(!0,{},s.jui.templateMixin,s.jui.compositMixin,s.jui.dataMixin,{options:{asHtml:!0},_render:function(){this.refresh()},refresh:function(e){var t=this;this.options=s.extend(!0,this.options,e);var i=this.options;t._getTemplate(function(){t.element.html(""),t._getData(function(){t.__beforeRender();var e=t.template;t.template&&t.data&&(e=s.jui.tmpl(t.template,t.data)),i.asHtml?t.element.html(e):t.element.text(e),t._renderChildren(),t.__afterRender()})})}}))}),function(e){"function"==typeof define&&define.amd?define("jui/misc/jpager",["jquery","jqueryui","../utils"],e):e(jQuery)}(function(r){r.widget("jui.jpager",{options:{pageIndex:1,pageSize:10,total:0,fields:{pageIndex:"pageIndex",pageSize:"pageSize"},displayItemCount:5,edgeItemCount:1,linkTo:"#",prevShowAlways:!0,nextShowAlways:!0,styleClass:"pagination",cssClasses:{widget:"jpager",itemContainer:"jpager-items",item:"jpager-item",itemSelected:"jpager-item-selected",info:"jpager-info"},selectors:{widget:".jpager",itemContainer:".jpager-items",item:".jpager-item",info:".jpager-info"},templates:{layout:'<div class="cell"><ul class="jpager-items"></ul></div><div class="jpager-info cell"></div><div class="cell-fit"></div>',item:'<li><a href="javascript:;">{{text}}</a></li>'},pageChanged:function(e,t){},texts:{info:"每页{{pageSize}}条，共{{total}}条",prev:"上一页",next:"下一页",ellipse:"..."}},_$itemContainer:null,_$pagerInfo:null,_bound:!1,_create:function(){var e=this.options;this.element.addClass(e.cssClasses.widget),e.templates.layout&&this.element.append(e.templates.layout),this._$itemContainer=this.element.find(e.selectors.itemContainer),this._$itemContainer.length||(this._$itemContainer=this.element.addClass(e.cssClasses.itemContainer)),this._$pagerInfo=this.element.find(e.selectors.info)},bind:function(e){var t=r.extend({},{total:this.options.total,pageIndex:this.options.pageIndex,pageSize:this.options.pageSize},e);this._bound?t.total==this.options.total&&t.pageIndex==this.options.pageIndex&&t.pageSize==this.options.pageSize||this._bindData(t):(this._bindData(t),this._bound=!0)},_bindData:function(e){this.options=r.extend(this.options,e),this._createPageItems(),this._createPagerInfo()},_createPageItems:function(){this._$itemContainer.empty();var n=this,a=this.options,l=a.pageIndex,e=this._getInterval(),o=this._getPageCount(),t=function(e,t){e=e<1?1:e<o?e:o,t=jQuery.extend({text:e,classes:""},t||{});var i,s=r(r.jui.tmpl(a.templates.item,{text:t.text})).addClass(a.cssClasses.item);t.space||(e==l?(s.addClass("active"),s.addClass(a.cssClasses.itemSelected)):s.bind("click",(i=e,function(e){return n._pageSelected(i,e)}))),t.classes&&s.addClass(t.classes),n._$itemContainer.append(s)};if(a.texts.prev&&(1<l||a.prevShowAlways)&&t(l-1,{text:a.texts.prev,classes:"prev"}),1<e[0]&&0<a.edgeItemCount){for(var i=Math.min(a.edgeItemCount,e[0]-1),s=1;s<=i;s++)t(s);a.edgeItemCount<e[0]-1&&a.texts.ellipse&&t(null,{text:a.texts.ellipse,classes:"space",space:!0})}for(s=e[0];s<=e[1];s++)t(s);if(e[1]<o&&0<a.edgeItemCount){o-a.edgeItemCount>e[1]&&a.texts.ellipse&&t(null,{text:a.texts.ellipse,classes:"space",space:!0});for(s=Math.max(o-a.edgeItemCount+1,e[1]);s<=o;s++)t(s)}a.texts.next&&(l<o||a.nextShowAlways)&&t(l+1,{text:a.texts.next,classes:"next"})},_createPagerInfo:function(){if(this._$pagerInfo.length){var e=r.jui.tmpl(this.options.texts.info,{total:this.options.total,pageSize:this.options.pageSize});this._$pagerInfo.html(e)}},_getInterval:function(){var e=this.options,t=e.pageIndex,i=Math.floor(e.displayItemCount/2),s=this._getPageCount(),n=s-e.displayItemCount;return[i<t?Math.max(Math.min(t-i,n),1):1,i<t?Math.min(t+i,s):Math.min(e.displayItemCount,s)]},_getPageCount:function(){return Math.ceil(this.options.total/this.options.pageSize)},_pageSelected:function(e){this.options.pageIndex=e,this._createPageItems();var t=this._trigger("pageChanged",null,{pageIndex:this.options.pageIndex,pageSize:this.options.pageSize});return t||(evt.stopPropagation?evt.stopPropagation():evt.cancelBubble=!0),t}})}),function(e){"function"==typeof define&&define.amd?define("jui/misc/jcollapse",["jquery","jqueryui","../utils"],e):e(jQuery)}(function(r){r.widget("jui.jcollapse",{options:{trigger:".jcollapse-trigger",target:".jcollapse-target",triggerType:"click",icons:{on:"fa fa-angle-up",off:"fa fa-angle-down"},multiple:!1,active:!1},_init:function(){var l=this,o=this.options;this.$trigger=this.element.find(this.options.trigger),this.$target=this.element.find(this.options.target),this.$trigger.each(function(e,t){var i=r(t),s=l.$target.eq(e),n=i.find(".jcollapse-icon");n.addClass(o.icons.off);var a={};a[o.triggerType]=function(e){i.is(".jcollapse-trigger-on")?(i.removeClass("jcollapse-trigger-on"),s.removeClass("jcollapse-on"),n.removeClass(o.icons.on).addClass(o.icons.off)):(o.multiple||(l.$trigger.filter(".jcollapse-trigger-on").each(function(){r(this).removeClass("jcollapse-trigger-on"),r(this).find(".jcollapse-icon").removeClass(o.icons.on).addClass(o.icons.off)}),l.$target.removeClass("jcollapse-on")),i.addClass("jcollapse-trigger-on"),s.addClass("jcollapse-on"),l._trigger("beforeShow",e,{trigger:i,target:s}),n.removeClass(o.icons.off).addClass(o.icons.on))},l._off(i,o.triggerType),l._on(i,a)}),!1!==o.active&&this.$trigger.eq(o.active).trigger(o.triggerType)}})}),function(e){"function"==typeof define&&define.amd?define("jui/spa",["jquery","jqueryui","text","./utils","./jcomponent","./mixins/compositMixin","./mixins/dataMixin"],e):e(jQuery)}(function(d){var a=function(e){var a=this;this.hash=void 0===e?location.hash:e,this.hash||(this.hash="#"+d.router.defaults.path),this.path=this.hash.substring(1),this.paths=[null,null,null],this.query={},this.queryStr="";var t=this.hash.indexOf("?");if(1<this.hash.length&&-1<t){this.path=this.hash.substring(1,t);var i=(this.queryStr=this.hash.substring(t+1)).split("&");d.each(i,function(e,t){var i,s,n=t.split("=");i=n[0],s=n[1],""!==i&&(a.query[i]=decodeURIComponent(s))})}var s=this.path.split("!");this.maxLevel=s.length-1,s.length<=3&&d.each(s,function(e,t){a.paths[e]=t})};d.router={defaults:{viewsDir:"app/views",routerElem:"#App",path:"!"},routes:{current:null,previous:null},routePathMap:{}},d.router.start=function(e){e&&(d.router.defaults=d.extend(d.router.defaults,e)),d(window).bind("hashchange",function(){var e=new a,t=null,i=!1;if(d.router.routes.previous=d.router.routes.current,d.router.routes.current=e,null!=d.router.routes.previous){var s=d.router.routes.current.paths,n=d.router.routes.previous.paths;s[0]!=n[0]?t=0:s[1]!=n[1]?t=1:s[2]!=n[2]?t=2:(d.router.routes.previous.queryStr||"")!=d.router.routes.current.queryStr&&(i=!0)}d.jui.event.trigger("hashChange",{route:e,changedLevel:t,queryChanged:i})}),d(window).trigger("hashchange"),d(d.router.defaults.routerElem).jrouter({level:0})},d.router.go=function(e){e=d.extend(!0,{},d.router.routes.current,e);for(var t="",i=0;i<=e.maxLevel;i++)t+=e.paths[i],i<e.maxLevel&&(t+="!");e.query&&(t+="?"+d.param(e.query)),window.location.hash="#"+t},d.widget("jui.jrouter",d.jui.jcomponent,{options:{url:null,level:null,viewOptions:null},_render:function(){var t=this,e=this.options;this.element.attr("level",e.level),this.element.addClass("jrouter"),null!=e.level?(this.go(this._getRouteUrl()),d.jui.event.on("hashChange",t.__hashChange=function(e){t._hashChange(e)})):e.url&&this.go(e.url)},go:function(e){var s=this,n=this.options,t=e;if(this.options.level||(this.options.url=e),"$"==e[0])if("/"==e[1])e=e.substring(2);else{var i=(e=e.substring(1)).split("/"),a=d.router.routePathMap[i[0]];e=d.jui.utils.pathCombine(a,e.substring(i[0].length))}else e=d.jui.utils.pathCombine(d.router.defaults.viewsDir,e);var l=d.jui.utils.parseUrl(e),o=l.path.replace(/\./g,"_"),r=l.path+".html";l.queryStr&&(r=r+"?"+l.queryStr);var u=l.path+".js";r=r.prepend("/"),u=u.prepend("/"),require(["text!"+r],function(e){var i=d(e);i.attr("view",t),s.element.html(i),require([u],function(e){d.views[o]||d.widget("views."+o,d.jui.jview,e);var t={properties:{urlData:l,route:d.router.routes.current,router:s,routerData:s.options.data}};t=d.extend(!0,{},t,n.viewOptions),s.view=d.views[o](t,i)})})},_refresh:function(){d.isNumeric(this.options.level)?this.go(this._getRouteUrl()):this.options.url&&this.go(this.options.url)},_getRouteUrl:function(){var e=this.options.level,s=d.router.routes.current.paths,t=d.router.routes.current.maxLevel,i=s[e];return e<t&&(i=d.jui.utils.pathCombine(i,"_layout")),i=function e(t,i){return 0==i?t:"/"!=t[0]&&"$"!=t[0]?e(t=d.jui.utils.pathCombine(s[i-1],t),i-1):t}(i,e),0<d.router.routes.current.queryStr.length&&(i=i+"?"+d.router.routes.current.queryStr),i},_hashChange:function(e){e.changedLevel==this.options.level&&this.refresh()},_destroy:function(){d.jui.event.off("hashChange",this.__hashChange)}}),d.views={},d.widget("jui.jview",d.jui.jcomponent,d.extend(!0,{},d.jui.compositMixin,d.jui.dataMixin,{options:{pageTitle:null,defaultSubpath:null,subviewOptions:null},_subpathChanged:d.noop,_queryChanged:d.noop,_hashChanged:d.noop,_afterRender:d.noop,_render:function(){var t=this,e=this.options;this.element.addClass("jview"),this._getData(function(){this.__beforeRender(),e.pageTitle&&(document.title=e.pageTitle),this.subLevel=this.router.options.level+1,this._renderChildren(),d.jui.event.on("hashChange",t.__hashChange=function(e){t._hashChange(e)}),e.defaultSubpath&&(this.subRouterElem=this._find(".jrouter"),this.route.paths[this.subLevel]||(this.route.paths[this.subLevel]=d.isFunction(e.defaultSubpath)?e.defaultSubpath.call(t):e.defaultSubpath),this.subRouterElem.jrouter({level:this.subLevel,viewOptions:e.subviewOptions}),this._subpathChanged()),this.__afterRender()})},_hashChange:function(e){this.route=d.router.routes.current;var t=this.options;this._hashChanged(),t.defaultSubpath&&e.changedLevel==this.subLevel&&this._subpathChanged(),e.queryChanged&&this._queryChanged()},queryChanged:function(e){return!d.router.routes.previous.query||d.router.routes.previous.query[e]!=d.router.routes.current.query[e]},_destroy:function(){d.jui.event.off("hashChange",this.__hashChange)}}))}),function(e){"function"==typeof define&&define.amd?define("jui/layers/jlayer",["jquery","jqueryui","../jcomponent","../mixins/templateMixin","../mixins/dataMixin","../mixins/compositMixin","../spa"],e):e(jQuery)}(function(r){var t={zIndex:2009};r.widget("jui.jlayer",r.jui.jcomponent,r.extend(!0,{},r.jui.templateMixin,r.jui.compositMixin,r.jui.dataMixin,{options:{appendTo:"body",insertAfter:null,modal:!1,asHtml:!0,backdrop:!1,closeOnClickBackdrop:!1,backdropBackground:"#000",backdropOpacity:.5,hideOnClickDoc:!1,closeOnClickDoc:!1,autoRender:!0,autoShow:!0,showAnimate:null,hideAnimate:null,fitElem:"",follow:null,align:null,position:null,size:{width:null,height:null,minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none"},attachElem:null},_render:function(){var t=this,i=this.options;if(this._rendered=!1,this.$body=r("body"),this.dismiss='[data-dismiss="jlayer"]',this.element.addClass("jlayer"),this.$wrapper=this.element,i.modal)this.$wrapper=r('<div class="jlayer-modal"></div>').hide(),this.element.appendTo(this.$wrapper),this.$wrapper.appendTo("body");else{if(this.element.hide(),i.align){i.position={of:window,collision:"flipfit",using:function(e){var t=r(this).css(e).offset().top;t<0&&r(this).css("top",e.top-t)}};var e=i.align.split(" ");if(1===e.length&&(e[1]="center"),i.follow&&!i.followInner){i.position.of=r(i.follow);var s=["center","center"],n=["center","center"];"left"==e[1]?(s[0]="left",n[0]="left"):"right"==e[1]?(s[0]="right",n[0]="right"):"top"==e[1]?(s[1]="top",n[1]="top"):"bottom"==e[1]&&(s[1]="bottom",n[1]="bottom"),"top"==e[0]?(s[1]="bottom",n[1]="top"):"bottom"==e[0]?(s[1]="top",n[1]="bottom"):"left"==e[0]?(s[0]="right",n[0]="left"):"right"==e[0]&&(s[0]="left",n[0]="right"),i.position.my=s[0]+" "+s[1],i.position.at=n[0]+" "+n[1]}else{var a=/left|center|right/,l=/top|center|bottom/,o=i.align.split(" ");1===o.length&&(o=a.test(o[0])?o.concat(["center"]):l.test(o[0])?["center"].concat(o):["center","center"]),o[0]=a.test(o[0])?o[0]:"center",o[1]=l.test(o[1])?o[1]:"center",i.position.my=o[0]+" "+o[1],i.follow?i.position.of=r(i.follow):i.position.at=o[0]+" "+o[1],i.position.my=o[0]+" "+o[1],i.position.at=o[0]+" "+o[1]}}i.position&&(this.element.css("position",i.fixed?"fixed":"absolute"),i.follow?i.position.of=r(i.follow):i.appendTo&&"body"!=i.appendTo?i.position.of=i.appendTo:i.position.of=window),this.$appendTo=r(i.appendTo),this.appendToIsBody=this.$appendTo.is("body"),this.$backdrop=r('<div class="jlayer-backdrop" style="display:none;" />'),this._isShown=!1,i.appendTo&&this._on(!0,r(i.appendTo),{remove:function(e){e.target===r(i.appendTo)[0]&&t&&t.close()}}),i.insertAfter?this.element.insertAfter(i.insertAfter):i.appendTo&&this.element.appendTo(i.appendTo),i.backdrop&&this.setBackdrop(),this.element.find(t.dismiss).on("click",function(){t.options.modal?t.close():t.hide()})}i.attachElem&&this._on(!0,r(i.attachElem),{remove:function(e){e.target===r(i.attachElem)[0]&&t&&t.close()}})},_init:function(){this.options.autoRender&&this.refresh(null,this.options.autoShow)},refresh:function(e,i){e&&(this.options=r.extend(this.options,e));var s=this,t=this.options;t.url?this.element.jrouter({url:t.url,data:t.data,viewOptions:{properties:{layer:s},afterRender:function(e,t){s.element.find(s.dismiss).on("click",function(){s.options.modal?s.close():s.hide()}),s._rendered=!0,i&&s.show()}}}):s._getTemplate(function(){s._getData(function(){s.__beforeRender();var e=this.template;this.template&&this.data&&(e=r.jui.tmpl(this.template,this.data)),t.asHtml?s.element.html(e):s.element.text(e),s.element.find(s.dismiss).on("click",function(){s.options.modal?s.close():s.hide()}),s._renderChildren(),s._rendered=!0,i&&s.show(),s.__afterRender()})})},show:function(){var e=this;this._rendered?(this._trigger("showing",null,null),this.setSize(),this.setPosition(),this.__show(),this._focus(),(this.options.position||this.options.modal)&&(e._off(e.window,"resize"),e._on(e.window,{resize:function(){e._isShown&&(e.setSize(),e.setPosition())}}))):this.refresh(null,!0)},__show:function(){var e=this;this._isShown||(this.setzIndex(),this.options.backdrop&&this.$backdrop.show(),this.options.modal&&(this.checkScrollbar(),this.setScrollbar()),this.options.showAnimate&&this.$wrapper.addClass(this.options.showAnimate+" animated"),this._show(this.$wrapper,this.options.show,function(){e.$wrapper.removeClass(e.options.showAnimate+" animated"),e._trigger("shown",null),e._docClickHandler()})),this._isShown=!0},hide:function(e){var t=this;void 0!==e&&(t.returnValue=e),this.$backdrop.hide(),this.$appendTo.data("container.static")&&this.$appendTo.css("position",""),this._isShown=!1,this._hide(this.$wrapper,this.options.hide,function(){t._trigger("hidden",null,e)}),t._off(t.window,"resize")},isShown:function(){return this._isShown},close:function(e){var t=this;void 0!==e&&(t.returnValue=e),r.support.transition&&null!=this.options.hideAnimate?this.element.addClass(this.options.hideAnimate+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t._close(e)}):this._close(e)},_close:function(e){if(this._trigger("closed",null,{result:e}),this._off(this.window,"resize"),this.$wrapper.remove(),this.options.modal){var t=this.$body.data("modalCount");t&&(t--,this.$body.data("modalCount",t),0==t&&this.resetScrollbar())}this.options.backdrop&&(this.$backdrop.remove(),this.$appendTo.data("container.static")&&this.$appendTo.css("position",null))},setSize:function(){var e=this.options;this.$fitElem=this.element.find(e.fitElem),this.hasFitElem=0<this.$fitElem.length;var t=e.size;if(t.height,this.hasFitElem){this.$fitElem.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0,boxSizing:"content-box"});var i,s=this.element.css({height:"auto",width:t.width}).outerHeight();i="number"==typeof t.height?t.height:e.modal||this.$appendTo.is("body")?r(window).height():this.$appendTo.height(),this.$fitElem.css("maxHeight",i-s),this.$fitElem.css("height","auto")}"number"==typeof t.maxWidth&&"number"==typeof t.minWidth&&(t.maxWidth=Math.max(t.maxWidth,t.minWidth)),"number"==typeof t.width&&(t.minWidth="none","number"==typeof t.maxWidth&&t.maxWidth>t.width&&(t.maxWidth=t.width)),this.element.css({maxWidth:t.maxWidth,minWidth:t.minWidth,maxHeight:t.maxHeight,minHeight:t.minHeight,width:t.width,height:t.height}),this._trigger("sized",null,null)},setPosition:function(){if(!this.options.modal&&this.options.position){var e=this.element.is(":visible");e||this.element.show(),this.element.position(this.options.position),e||this.element.hide(),this.appendToIsBody||this.$backdrop.css({position:"absolute",width:this.$appendTo.width()+"px",height:this.$appendTo.height()+"px"})}},setzIndex:function(){var e=t.zIndex++;this.$wrapper.css("zIndex",e),this.options.backdrop&&this.$backdrop.css("zIndex",e-1),this.zIndex=e},setBackdrop:function(){var t=this,e=this.options,i=this.$backdrop,s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",opacity:0,background:this.options.backdropBackground};this.appendToIsBody||(r.extend(s,{position:"absolute",width:this.$appendTo.width()+"px",height:this.$appendTo.height()+"px"}),"static"==this.$appendTo.css("position")&&(this.$appendTo.css("position","relative"),this.$appendTo.data("container.static",!0))),i.css(s).animate({opacity:this.options.backdropOpacity},150).insertAfter(this.element).attr({tabindex:"0"}),e.closeOnClickBackdrop&&t._on(i,{click:function(e){e.target===e.currentTarget&&t.close()}})},_focus:function(){var e=this.element.find("[autofocus]");e.focus(),e.eq(0).trigger("focus")},getBackdrop:function(){return this.$backdrop},_docClickHandler:function(){var i=this;i.options.closeOnClickDoc&&i._on(i.document,{mousedown:function(e){var t=r(e.target).closest(".jlayer");t.length?t.jlayer("instance").zIndex<i.zIndex&&(i.close(),i._off(i.document,"mousedown touchstart")):(i.close(),i._off(i.document,"mousedown touchstart"))}}),this.options.hideOnClickDoc&&this._on(this.document,{mousedown:function(e){var t=r(e.target).closest(".jlayer");t.length?t.jlayer("instance").zIndex<i.zIndex&&(i.hide(),i._off(i.document,"mousedown touchstart")):(i.hide(),i._off(i.document,"mousedown touchstart"))}})},_destroy:function(){this.options.modal&&(this.$backdrop.remove(),this.$appendTo.data("container.static")&&this.$appendTo.css("position","static"))},checkScrollbar:function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=r.position.scrollbarWidth()},setScrollbar:function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.originalBodyOverflow=document.body.style.overflow||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth),this.$body.css("overflow","hidden");var t=this.$body.data("modalCount");t?(t++,this.$body.data("modalCount",t)):this.$body.data("modalCount",1)},resetScrollbar:function(){this.$body.css("padding-right",this.originalBodyPad),this.$body.css("overflow",this.originalBodyOverflow),this.$body.removeData("modalCount")}}))}),function(e){"function"==typeof define&&define.amd?define("jui/layers/jpop",["jquery","jqueryui","./jlayer"],e):e(jQuery)}(function(s){s.widget("jui.jpop",{options:{trigger:null,triggerType:"click",layerElem:null,layer:{autoShow:!1,align:"bottom left",position:{my:"left top",at:"left bottom",collision:"flipfit",using:function(e){var t=s(this).css(e).offset().top;t<0&&s(this).css("top",e.top-t)}}},hideOnClickAnywhere:!1},_create:function(){var e=this.options;e.layerElem&&(this.$layer=s(e.layerElem)),this.$layer&&this.$layer.length||(this.$layer=s("<div>")),this.options.trigger&&(this.$trigger=s(this.options.trigger)),this.$trigger&&this.$trigger.length||(this.$trigger=this.element),this.$trigger.addClass("jpop-trigger"),this.element.addClass("jpop"),this.$layer.addClass("jpop-layer"),e.layer.follow=this.element,e.relEl=this.$trigger,this.$layer.jlayer(e.layer)},_init:function(){this._bindTrigger()},_bindTrigger:function(){"click"===this.options.triggerType?this._bindClick():this._bindHover()},_bindClick:function(){var t=this,i=this.options;this._on(this.$trigger,{click:function(e){t.$layer.jlayer("isShown")?(t.$layer.jlayer("hide"),t._off(t.document,"mousedown touchstart")):(t.$layer.jlayer("show"),t._on(t.document,{mousedown:s.proxy(function(e){(i.hideOnClickAnywhere||e.target!==s(t.options.relEl)[0]&&!s(e.target).closest(t.options.relEl).length&&!s(e.target).closest(t.$layer).length)&&(t.$layer.jlayer("hide"),t._off(t.document,"mousedown touchstart"))},t)}))}})},_bindHover:function(){function e(e){clearTimeout(t),t=null,n.$layer.jlayer("isShown")&&(i=setTimeout(function(){n.$layer.jlayer("hide")},s))}var t,i,s=100,n=this;this._on(this.$trigger,{mouseenter:function(e){clearTimeout(i),i=null,t=setTimeout(function(){n.$layer.jlayer("show")},s)},mouseleave:e}),n.$layer.on("mouseenter",function(){clearTimeout(i)}),n.$layer.on("mouseleave",e)},_destroy:function(){this.$layer.jlayer("close")},hide:function(){this.$layer.jlayer("hide")},getLayer:function(){return this.$layer}})}),function(e){"function"==typeof define&&define.amd?define("jui/layers/jlayer.modal",["jquery","./jlayer"],e):e(jQuery)}(function(t){t.jui.modal=function(e){return e=t.extend(!0,{},e,{modal:!0,hideAnimate:"fadeOutUp",showAnimate:"fadeInDown",size:{maxHeight:"fit"},fitElem:".modal-bd",closeOnClickBackdrop:!0}),$layer=t("<div>"),$layer.jlayer(e),$layer}}),function(e){"function"==typeof define&&define.amd?define("jui/layers/jlayer.alert",["jquery","./jlayer"],e):e(jQuery)}(function(l){l.jui.alert=function(e){var t=null;(e=l.extend(!0,{},{appendTo:"body",follow:null,type:null,icon:null,message:null,description:null,showClose:!0,backdrop:!0,size:{maxWidth:416},position:{my:"center center",at:"center center",of:window},template:'<div class="jalert jalert-{{type}}"><div class="jalert-content-wrapper"><div class="jalert-icon"><i class="{{icon}}"></i></div><div class="jalert-content">{{if message}}<div class="jalert-message" name="message"></div>{{/if}}{{if description}}<div class="jalert-description" name="description">{{#description}}</div>{{/if}}</div></div>{{if commands}}<ul class="jalert-commands" name="commands"></ul>{{/if}}</div>{{if showClose}}<div class="jalert-close"><span class="jlayer-close" data-dismiss="jlayer" style="display: block;"></span></div>{{/if}}'},e,{modal:!1})).data={type:e.type,message:e.message,description:e.description,icon:e.icon,showClose:e.showClose,commands:e.commands};var i=[];if(e.message){var s={name:"message",widget:"jtmpl"};"string"==typeof e.message?s.template=e.message:s=l.extend(!0,{},s,e.message),i.push(s)}if(e.description){var n={name:"description",widget:"jtmpl"};"string"==typeof e.description?n.template=e.description:n=l.extend(!0,{},n,e.description),i.push(n)}var a=null;return e.commands&&(a={name:"commands",widget:"jlistCommands"},a=l.extend(!0,{},a,e.commands),i.push(a)),e.components=i,t=l("<div>").jlayer(e).jlayer("instance"),null!=a&&(t.$commands.options.target=t),t},l.jui.alert.info=function(e){return"string"==typeof e&&(e={message:e}),e=l.extend(!0,{},{type:"info",icon:"fa fa-info-circle",commands:{data:[{text:"确定",styleClass:"bg-primary",command:function(e){e.close()}}]}},e),l.jui.alert(e)},l.jui.alert.success=function(e){return"string"==typeof e&&(e={message:e}),e=l.extend(!0,{},{type:"success",icon:"fa fa-check-circle",commands:{data:[{text:"确定",styleClass:"bg-primary",command:function(e){e.close()}}]}},e),l.jui.alert(e)},l.jui.alert.warning=function(e){return"string"==typeof e&&(e={message:e}),e=l.extend(!0,{},e,{type:"warning",icon:"fa fa-exclamation-circle",commands:{data:[{text:"确定",styleClass:"bg-primary",command:function(e){e.close()}}]}}),l.jui.alert(e)},l.jui.alert.error=function(e){return"string"==typeof e&&(e={message:e}),e=l.extend(!0,{},e,{type:"error",icon:"fa fa-times-circle",duration:!1,showClose:!0,commands:{data:[{text:"确定",styleClass:"bg-primary",command:function(e){e.close()}}]}}),l.jui.alert(e)},l.jui.alert.confirm=function(e){return"string"==typeof e&&(e={message:e}),e=l.extend(!0,{},{type:"confirm",icon:"fa fa-question-circle",showClose:!0,onOk:null,commands:{data:[{text:"确定",styleClass:"bg-primary",command:function(e){e.close(),e&&l.isFunction(e.options.onOk)&&e.options.onOk()}},{text:"取消",command:function(e){e.close()}}]}},e),l.jui.alert(e)}}),function(e){"function"==typeof define&&define.amd?define("jui/layers/jlayer.tip",["jquery","./jlayer"],e):e(jQuery)}(function(o){o.jui.tip=function(t){var e=null,i=[],s={name:"message",widget:"jtmpl"};"string"==typeof(t=o.extend(!0,{},{appendTo:"body",follow:null,type:null,icon:null,message:null,duration:2,showClose:!1,tipElem:null,position:{my:"center center",at:"center center",of:window},closeToHide:!1,template:'<div class="jtip-inner">{{if icon}}<div class="jtip-icon"><i class="{{icon}}"></i></div>{{/if}}{{if message}}<div class="jtip-message" name="message"></div>{{/if}}{{if commands}}<ul class="jtip-commands" name="commands"></ul>{{/if}}</div>',data:{message:t.message,description:t.description,icon:t.icon,showClose:t.showClose,commands:t.commands}},t,{modal:!1})).message?s.template=t.message:s=o.extend(!0,{},s,t.message),i.push(s);var n=null;if(t.showClose){var a={icon:"fa fa-remove",styleClass:"btn-link",command:function(e){t.closeToHide?e.hide():e.close()}};t.commands?t.commands.data.push(a):t.commands={data:[a]}}n=null;t.commands&&(n={name:"commands",widget:"jlistCommands",itemStyleClass:"btn-link"},n=o.extend(!0,{},n,t.commands),i.push(n)),t.data.commands=t.commands,t.components=i;var l=o('<div class="jtip">');return t.tipElem&&(l=o(t.tipElem).addClass("jtip"),t.appendTo=null,t.insertAfter=null,t.position=null),t.type&&l.addClass("jtip-"+t.type),l.jlayer(t),e=l.jlayer("instance"),null!=n&&(e.$commands.options.target=e),t.duration&&setTimeout(function(){e.close()},1e3*t.duration),e.message=function(e){var t=e;"string"==typeof e&&(t={template:e}),this.$message.refresh(t),this.setPosition()},e},o.jui.tip.info=function(e){return"string"==typeof e&&(e={message:e}),e=o.extend(!0,{},{type:"info",icon:"fa fa-info-circle"},e),o.jui.tip(e)},o.jui.tip.success=function(e){return"string"==typeof(e=e||{})&&(e={message:e}),e.icon=e.icon||"fa fa-check-circle fa-2x",e.message||(e.styleClass="jtip-nobg"),e=o.extend(!0,{},{type:"success",hideAnimate:"fadeOutUp",duration:.5},e),o.jui.tip(e)},o.jui.tip.warning=function(e){return"string"==typeof e&&(e={message:e}),e=o.extend(!0,{},{type:"warning",icon:"fa fa-exclamation-circle",duration:!1,showClose:!0},e),o.jui.tip(e)},o.jui.tip.error=function(e){return"string"==typeof e&&(e={message:e}),e=o.extend(!0,{},{type:"error",icon:"fa fa-times-circle",duration:!1,showClose:!0},e),o.jui.tip(e)},o.jui.tip.loading=function(e){var t=null;if(!(t="string"==typeof(e=e||{})?{message:e}:o.extend(!0,{},e)).icon){var i=t.img||'<img src="/assets/img/loading.gif"></img>';t.message?t.message=i+" "+t.message:t.message=i}return t=o.extend(!0,{},{type:"loading",styleClass:"jtip-nobg",backdrop:!0,backdropBackground:"#ccc",backdropOpacity:.3,duration:!1},t),o.jui.tip(t)}}),function(e){"function"==typeof define&&define.amd?define("jui/utils.ajax",["jquery","./utils","./layers/jlayer.tip","./layers/jlayer.modal"],e):e(jQuery)}(function(l){l.jui=l.jui||{},l.jui.loginPath="",l.jui.accessDeniedPath="/admin/#liteaf.membership/spa/auth/accessDenied",l.jui.ajax=function(s){s=s||{};var n=null,a=l.extend(!0,{loadingTip:{},successTip:{},errorTip:{tipMode:!1,tipElem:null}},s);return a.beforeSend=function(){if(a.loadingTip&&(n=l.jui.tip.loading(a.loadingTip)),null!=a.errorTip.tipElem){a.errorTip.closeToHide=!0;var e=l(a.errorTip.tipElem).jlayer("instance");null!=e&&e.hide()}s.beforeSend&&s.beforeSend.apply(this,arguments)},a.success=function(e){if(n&&n.close(),e&&0==e.Success){if(a.errorTip){var t,i=l.extend(!0,{},a.errorTip);return l.isArray(e.Errors)&&e.Errors.length&&(t={template:"<ul>{{each Errors as value}}<li>{{value}}</li>{{/each}}</ul>",data:{Errors:e.Errors}}),i.message=e.Message,i.description=t,e.UnLogined&&(i.closed=function(e,t){location.href=l.jui.loginPath}),e.UnAuthed&&(i.closed=function(e,t){location.href=l.jui.accessDeniedPath}),void(i.tipMode||i.tipElem?l.jui.tip.error(i):l.jui.alert.error(i))}}else a.successTip&&l.jui.tip.success(a.successTip);s.success&&s.success.apply(this,arguments),e&&null!=e&&e.RedirectUrl&&(top.location=e.RedirectUrl)},a.complete=function(){n&&n.close(),s.complete&&s.complete.apply(this,arguments)},a.__responseHandled=!0,jQuery.ajax(a)},l.jui.postJson=function(e){return(e=l.extend({},e,{type:"POST",dataType:"json",contentType:"application/json",loading:{},notifySuccess:{}})).data&&l.isPlainObject(e.data)&&"application/json"==e.contentType&&(e.data=JSON.stringify(e.data)),l.jui.ajax(e)},l.jui.getJson=function(e){return e=l.extend({},e,{type:"GET",dataType:"json"}),l.jui.ajax(e)},l(document).ajaxComplete(function(e,t,i){try{var s=l.parseJSON(t.responseText)}catch(e){return}s&&null!=s&&(s.UnLogined&&(location.href=l.jui.loginPath),s.UnAuthed&&(location.href=l.jui.accessDeniedPath))}),l(document).ajaxError(function(e,t,i){try{var s=l.parseJSON(t.responseText)}catch(e){return}if(s&&null!=s&&s.RedirectUrl&&(top.location=s.RedirectUrl),s&&null!=s&&s.Message){var n=l.jui.utils.htmlEncode(s.Message);n=n.replace(/\n/g,"<br>"),l.jui.modal({data:{msg:n},template:'<div class="modal"><div class="modal-hd"><div class="navbar"><div class="navbar-hd"><h4>系统错误</h4></div><div class="navbar-ft"><span data-dismiss="jlayer" class="jlayer-close" id="btnClose"></span></div></div></div><div class="modal-bd"><p>{{#msg}}</p></div><div class="modal-ft"><button type="button" class="btn" data-role="cancel" data-dismiss="jlayer">关闭</button></div></div>'})}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlist",["jquery","jqueryui","../jcomponent","../utils","../misc/jpager","../mixins/dataMixin"],e):e(jQuery)}(function(v){v.widget("jui.jlist",v.jui.jcomponent,v.extend(!0,{},v.jui.dataMixin,{options:{autoBind:!0,delayLoad:!1,type:"normal",fields:{key:"Id",total:"Total",items:"Items"},templates:{layout:null,item:null,itemWrapper:null,edit:null,empty:null,firstAddOn:null,lastAddOn:null,tree:{subitem:null,children:null}},styleClasses:{itemSelected:"active"},cssClasses:{itemContainer:"jlist-items",item:"jlist-item",itemWrapper:"jlist-item-wrapper",itemSelected:"jlist-item-selected",itemPartSelected:"jlist-item-partselected",checkerAllChecked:"jlist-checker-all-checked",emptyItem:"jlist-empty",firstAddOn:"jlist-item-firstaddon",lastAddOn:"jlist-item-lastaddon"},selectors:{widget:".jlist",itemContainer:".jlist-items",item:".jlist-item",itemWrapper:".jlist-item-wrapper",itemSelected:".jlist-item-selected",itemPartSelected:".jlist-item-partselected",itemChecker:".jlist-item-checker",checkerAll:".jlist-checker-all",cCheckerAllChecked:".jlist-checker-all-checked",emptyItem:".jlist-empty",pager:".jlist-pager",firstAddOn:".jlist-item-firstaddon",lastAddOn:".jlist-item-lastaddon"},pageable:!1,selectable:{multiple:!1,cascade:!0,cascadeCancelParent:!0,onlyleaf:!0,selectOnClick:!0,singleSelectCanRevert:!1,checkAllElem:!1},tree:{isListData:!0,indent:16,initCollapseLevel:!1,fields:{key:"Id",children:"Children",parentKey:"ParentId"},toggleOnClick:!1,popChildren:!1,popTriggerType:"click",popAppendTo:"body",cssClasses:{children:"jlist-children",childrenItemContainer:"jlist-children-items",toggle:"jlist-item-toggle",leaf:"jlist-item-leaf",collapsed:"jlist-item-collapsed"},selectors:{children:".jlist-children",childrenItemContainer:".jlist-children-items",toggle:".jlist-item-toggle",leaf:".jlist-item-leaf"}},group:{cssClasses:{group:"jlist-group",children:"jlist-children",childrenItemContainer:"jlist-children-items"},selectors:{group:".jlist-group",children:".jlist-children",childrenItems:".jlist-children-items"},groupsFiled:"Groups",childrenField:"Children",cssClass:"jlist-group",selector:".jlist-group",templates:null},initEdit:!1,bindExtra:!1,buildItemData:v.noop,itemConverter:null,loading:{},itemClick:function(){},selected:function(){}},_$itemContainer:null,_$pager:null,_context:null,_total:0,_render:function(){function e(t){t.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.hasClass(s.cssClasses.checkerAllChecked)?(i.deselectAll(),t.removeClass(s.cssClasses.checkerAllChecked)):(i.selectAll(),t.addClass(s.cssClasses.checkerAllChecked))})}var i=this,s=i.options;if(this.itemelems=[],this.removedItemDatas=[],this.removedItemElems=[],this.element[0].nodeName.toLowerCase(),this.element.addClass("jlist"),this._getTemplates(),s.templates.layout&&this.element.html(s.templates.layout),this.element.is(s.selectors.itemContainer)?this._$itemContainer=this.element:(this._$itemContainer=this.element.find(s.selectors.itemContainer),this._$itemContainer.length||(this._$itemContainer=this.element.addClass(s.cssClasses.itemContainer))),this._$itemContainer.addClass(s.styleClasses.itemContainer),s.pageable){s.pageable.el?this._$pager=s.pageable.el:this._$pager=this.element.find(s.selectors.pager),this._$pager.length||(this._$pager=v("<div>").appendTo(this.element));var t=v.extend({},s.pageable,{pageChanged:function(e,t){s.pageable.pageIndex=t.pageIndex,s.pageable.pageSize=t.pageSize,i.bind()}});this._$pager.jpager(t),s.pageable=this._$pager.jpager("option")}s.selectable&&s.selectable.multiple&&(this._$checkerAll=this.element.find(s.selectors.checkerAll),this._$checkerAll.length&&e(this._$checkerAll),s.selectable.checkAllElem&&(this._$checkerAll=v(s.selectable.checkAllElem),e(v(s.selectable.checkAllElem))))},_init:function(){this.options.autoBind&&this.bind()},refresh:function(e){this.options=v.extend(!0,this.options,e),this.options.pageable&&(this.options.pageable.pageIndex=1),this.bind()},bind:function(){var e=this,t=this.options,i={};t.pageable&&(i[t.pageable.fields.pageIndex]=t.pageable.pageIndex,i[t.pageable.fields.pageSize]=t.pageable.pageSize),t.dataUrl&&t.loading&&(e.$loading&&e.$loading.close(),t.loading.appendTo=e.element,e.$loadding=v.jui.tip.loading(t.loading)),this._getData(function(){e.$loadding&&e.$loadding.close(),e.bindData(e.data)},i)},bindData:function(e){var t,i=this,s=this.options;if(e||(e=[]),i._$itemContainer.empty(),t=v.isArray(e)?e:e[s.fields.items],v.isArray(t)||(t=[]),i._total=t.length,0<t.length||this._addEmpty(),s.templates.firstAddOn){var n=v.jui.tmpl(s.templates.firstAddOn,{}),a=v(n).addClass(s.cssClasses.firstAddOn);this._$itemContainer.append(a),a.find("[data-command]").on("click",function(e){var t=v(e.currentTarget).attr("data-command");if(t)return e.preventDefault(),e.stopPropagation(),void i._trigger("itemCommand",e,{command:t})})}if("group"==s.type)for(var l=0;l<e[s.group.groupsField].length;l++){var o=e[s.group.groupsField][l];i._bindGroup(o)}else if("tree"==s.type){var r=t;s.tree.isListData&&(r=i._toTreeData(t)),s.delayLoad&&i.element.data("data",r);for(l=0;l<r.length;l++){var u=r[l];i.bindItem(u,null,!0)}}else for(l=0;l<t.length;l++){u=t[l];var d=!1,p=!1;0==l&&(d=!0),l==t.length-1&&(p=!0),i.bindItem(u,{index:l,first:d,last:p,items:t},!0)}if(s.pageable&&(i._total=e[s.fields.total],this._$pager.jpager("bind",{total:i._total,pageIndex:s.pageable.pageIndex})),s.templates.lastAddOn){n=v.jui.tmpl(s.templates.lastAddOn,{});var c=v(n).addClass(s.cssClasses.lastAddOn);this._$itemContainer.append(c),c.find("[data-command]").on("click",function(e){var t=v(e.currentTarget).attr("data-command");if(t)return e.preventDefault(),e.stopPropagation(),void i._trigger("itemCommand",e,{command:t})})}i._trigger("dataBound",null,{data:e})},_getTemplates:function(){var a=this.options;this._find('script[type="text/html"]').each(function(e,t){var i=v(this),s=i.attr("data-role");if(0<s.indexOf(".")){var n=s.split(".");a.templates[n[0]][n[1]]=i.html()}else a.templates[s]=i.html()})},_bindEvents:function(a){var l=this,o=this.options,r=a.data("itemData"),e=a.find("[data-command]");if(a.is("[data-command]")&&(e=e.add(a)),e.on("click",function(e){var t=v(e.currentTarget).attr("data-command");if(t)return e.preventDefault(),e.stopPropagation(),void l._trigger("itemCommand",e,{command:t,itemData:r,itemElem:a})}),o.tree.popChildren){var t=l._getChildren(a);a.data("children",t),l.popChildrenElems||(l.popChildrenElems=[]),l.popChildrenElems.push(t),t&&a.jpop({layerElem:t,triggerType:o.tree.popTriggerType,layer:{appendTo:o.tree.popAppendTo}})}a.on("click",function(e){var t=v(e.target);if("tree"==o.type){var i=!a.is(o.tree.selectors.leaf);if(!o.tree.popChildren&&(t.is(o.tree.selectors.toggle)||i&&o.tree.toggleOnClick)){if(e.preventDefault(),e.stopPropagation(),o.delayLoad&&!a.data("isLoadedChildren")){a.data("isLoadedChildren",!0);var s=r[o.tree.fields.children];return s&&s.length&&a.toggleClass(o.tree.cssClasses.collapsed),void v.each(s,function(e,t){var i={isShowForDelayLoad:!0,relativeItem:a};l.bindItem(t,i)})}var n=l._getChildren(a);return void(null!=n&&(n.toggleClass("hide"),a.toggleClass(o.tree.cssClasses.collapsed)))}}return a.is(".jlist-item-disabled")?(e.preventDefault(),void e.stopPropagation()):o.selectable&&t.is(o.selectors.itemChecker)?(e.preventDefault(),e.stopPropagation(),void l.select(a)):(o.selectable&&o.selectable.selectOnClick&&l.select(a),void l._trigger("itemClick",e,{itemElem:a,itemData:r,inst:l}))})},_parse:function(){this._$itemContainer.find(this.options.selectors.item).each(function(){var e={},t=v(this).attr("data-item");t&&("{"!=t.substring(0,1)&&(t="{"+t+"}"),e=new Function("return "+t)()),v(this).data("item",e)})},_createItem:function(e,t){var i=this.options;t=v.extend({level:0,isNew:!1,isEdit:!1},t),this._context&&(e.context=this._context),i.itemConverter&&v.isFunction(i.itemConverter)&&(e=i.itemConverter.call(this,e));var s=this.options.templates.item;t.isEdit&&(s=this.options.templates.edit),"tree"==i.type&&0<t.level&&i.templates.tree.subitem&&(s=i.templates.tree.subitem);var n=e;i.bindExtra&&(n=v.extend({item:e},t));var a=v.jui.tmpl(s,n),l=v(a).addClass(this.options.cssClasses.item).addClass(this.options.styleClasses.item).attr("data-item-key",e[this.options.fields.key]).data("itemData",e).attr("isnew",t.isNew).attr("isedit",t.isEdit);if("tree"==this.options.type){l.data("level",t.level);var o=l.find(".jlist-indent");o.length||(o=l),0<t.level&&this.options.tree.indent&&(i.tree.popChildren||o.css("padding-left",t.level*this.options.tree.indent)),0!=i.tree.initCollapseLevel&&i.tree.initCollapseLevel-1<=t.level&&l.addClass(i.tree.cssClasses.collapsed)}return this._trigger("itemCreated",null,{itemElem:l,itemData:e,createOptions:t}),l},bindItem:function(e,t,i){var s=this,n=s.options,a=!0;i&&(a=!1),void 0!==e&&null!=e||(e={});var l=!1;i&&n.initEdit&&(l=!0);var o=(t=v.extend({relativeItem:null,target:null,isEdit:l,position:"append"},t)).target;null==t.target&&(o=this._$itemContainer),!t.target&&t.relativeItem&&(o=t.relativeItem);var r={isNew:a,isEdit:t.isEdit,first:t.first,last:t.last,index:t.index};if("tree"==s.options.type){if("append"==t.position||"prepend"==t.position)t.relativeItem&&(o=s._getChildrenItemContainer(t.relativeItem),r.level=t.relativeItem.data("level")+1,!n.tree.popChildren&&0!=n.tree.initCollapseLevel&&n.tree.initCollapseLevel<=r.level&&!t.isShowForDelayLoad&&o.addClass("hide"),n.tree.popChildren&&o.css("display","none"));else if(n.templates.itemWrapper&&t.relativeItem&&(o=s._getItemWrapper(t.relativeItem)),t.relativeItem&&(r.level=t.relativeItem.data("level")),"after"==t.position){var u=s._getChildren(t.relativeItem);null!=u&&(o=u)}}else n.templates.itemWrapper&&t.relativeItem&&(o=s._getItemWrapper(t.relativeItem));"replace"==t.position&&(r.isNew=t.relativeItem.attr("isNew"));var d=this._createItem(e,r);if("replace"==t.position?d.data("itemInitData",t.relativeItem.data("itemInitData")):d.data("itemInitData",e),d.data("itemData",e),"tree"==s.options.type){var p=e[s.options.tree.fields.children];(!v.isArray(p)||0<!p.length)&&d.addClass(s.options.tree.cssClasses.leaf)}var c=d;if(n.templates.itemWrapper){var h=v.jui.tmpl(n.templates.itemWrapper,e),m=v(h);m.wrapInner(d).addClass(n.cssClasses.itemWrapper).addClass(n.styleClasses.itemWrapper),c=m}if("prepend"==t.position)c.prependTo(o);else if("append"==t.position){var f=o.children(n.selectors.lastAddOn);f.length?c.insertBefore(f):c.appendTo(o)}else"after"==t.position?c.insertAfter(o):"replace"==t.position&&d.replaceAll(o);if(i||"replace"==t.position||(s._total++,s.options.pageable&&s._$pager.jpager("bind",{total:s._total})),"tree"==s.options.type){p=e[this.options.tree.fields.children];if("replace"!=t.position&&v.isArray(p)&&0<p.length){var g=v.extend(t,{relativeItem:d});n.delayLoad?n.tree.initCollapseLevel>d.data("level")+1&&(d.data("isLoadedChildren",!0),v.each(p,function(e,t){s.bindItem(t,g,i)})):v.each(p,function(e,t){s.bindItem(t,g,i)})}}return this._removeEmpty(),this._bindEvents(d),this._trigger("itemDataBound",null,{itemData:e,itemElem:d,isEdit:t.isEdit,isInit:i}),d},_createGroup:function(e){var t=v.jui.tmpl(this.options.group.template,e);return v(t).addClass(this.options.group.cssClasses.group).data("groupData",e)},_bindGroup:function(e){var t=this._createGroup(e);this._$itemContainer.append(t);var i=t.find(this.options.group.selectors.children),s=e[this.options.group.childrenField];if(s&&s.length)for(var n=0;n<s.length;n++){var a=s[n];this.bindItem(a,{target:i},!0)}},_getItemWrapper:function(e){return e.closest(this.options.selectors.itemWrapper)},_getParent:function(e){var t=e.closest(this.options.tree.selectors.children);return t&&0!=t.length?t.prev():null},_getChildren:function(e){var t=e.next();return t.is(this.options.tree.selectors.children)?t:null},_getChildrenItemContainer:function(e,t){if(e.data("children"))return e.data("children");var i=e.next();if(i.is(this.options.tree.selectors.children)||(i=v(v.jui.tmpl(this.options.templates.tree.children,{})).insertAfter(e)).addClass(this.options.tree.cssClasses.children),i.is(this.options.tree.selectors.childrenItemContainer))return i;var s=i.findUntil(this.options.tree.selectors.childrenItemContainer,this.options.tree.selectors.childrenItemContainer);return s.length||(s=i.addClass(this.options.tree.cssClasses.childrenItemContainer)),s},_getChildItemElems:function(e){return e?this._getChildrenItemContainer(e).findUntil(this.options.selectors.item,[this.options.selectors.widget,this.options.tree.selectors.children]):this._$itemContainer.findUntil(this.options.selectors.item,[this.options.selectors.widget,this.options.tree.selectors.children])},getShortSelected:function(e,i){var s=this,n=this.options;return i=void 0!==i?i:[],this._getChildItemElems(e).each(function(e,t){v(t).is(n.selectors.itemSelected)?i.push(s.getItemData(v(t))):s.getShortSelected(v(t),i)}),i},select:function(e,t,i,s,n){var a=this,l=!1,o=t;t&&v.isPlainObject(t)||(o={notFireEvent:t,notCascade:i,notRevert:s,callback:n}),function(){a.gettingData?setTimeout(arguments.callee,200):(v.jui.utils.isJqObj(e)&&1<e.length?e.each(function(){l=a._selectSingle(v(this),o.notFireEvent,o.notCascade,o.notRevert)||l}):v.isArray(e)?v.each(e,function(e,t){l=a._selectSingle(t,o.notFireEvent,o.notCascade,o.notRevert)||l}):l=a._selectSingle(e,o.notFireEvent,o.notCascade,o.notRevert)||l,!o.notFireEvent&&l&&a._trigger("selectionChanged",null,{}),a._refreshCheckerAllState(),o.callback&&v.isFunction(o.callback)&&o.callback.call(a))}()},selectIndex:function(e,t){var i=getAllItemElems().eq(e),s=this._selectSingle(i,t.notFireEvent,t.notCascade,t.notRevert);!t.notFireEvent&&s&&this._trigger("selectionChanged",null,{})},selectAll:function(){var e=this.getAllItemElems();this.select(e,!0,!0,!0)},deselect:function(e,s){var n=this;!function(){var i;n.gettingData?setTimeout(arguments.callee,200):(v.jui.utils.isJqObj(e)&&1<e.length?e.each(function(){i=n._deselectSingle(v(this),s)||i}):v.isArray(e)?v.each(e,function(e,t){i=n._deselectSingle(t,s)||i}):i=n._deselectSingle(e,s)||i,!s&&i&&n._trigger("selectionChanged",null,{}),n._refreshCheckerAllState())}()},deselectAll:function(){var e=this.getAllItemElems();this.deselect(e,!0)},_selectItemElem:function(e,t,i,s){var n=!1,a=this,l=this.options;if(void 0===i&&(i=!l.selectable.cascade),!l.selectable.onlyleaf||"tree"!=l.type||e.is(l.tree.selectors.leaf)){if(e.hasClass(l.cssClasses.itemSelected)){if(!s){if(!l.selectable.singleSelectCanRevert&&!l.selectable.multiple)return;n=this._deselectItemElems(e)||n}}else l.selectable.multiple||this._deselectItemElems(this._getSelectedItemElems()),e.removeClass(l.cssClasses.itemPartSelected).addClass(a.options.cssClasses.itemSelected).addClass(a.options.styleClasses.itemSelected),null!=t&&1==t||(this._trigger("itemSelected",null,{itemElem:e,itemData:this.getItemData(e)}),n=!0);return"tree"!=l.type||i||(function e(s){var t=a._getParent(s);t&&(a._getChildren(t).removeClass("hide"),t.removeClass(l.cssClasses.itemSelected).removeClass(l.styleClasses.itemSelected).removeClass(l.cssClasses.itemPartSelected),function(e,t){if(!s.hasClass(l.cssClasses.itemSelected))return!1;var i=!0;return a._getChildren(t).find(l.selectors.item).each(function(){if(!v(this).hasClass(l.cssClasses.itemSelected))return i=!1}),i}(0,t)?t.addClass(l.cssClasses.itemSelected).addClass(l.styleClasses.itemSelected):function(e,t){if(t.hasClass(l.cssClasses.itemSelected),t.hasClass(l.cssClasses.itemPartSelected))return!1;var i=!0;return a._getChildren(t).find(l.selectors.item).each(function(){if(v(this).hasClass(l.cssClasses.itemSelected)||v(this).hasClass(l.cssClasses.itemPartSelected))return i=!1}),i}(0,t)&&l.cascadeCancelParent||t.addClass(l.cssClasses.itemPartSelected),e(t))}(e),function(e){var t=a._getChildren(e);if(t){var i=t.findUntil(l.selectors.item,l.selectors.widget);i.removeClass(l.cssClasses.itemSelected).removeClass(l.styleClasses.itemSelected).removeClass(l.cssClasses.itemPartSelected),e.hasClass(l.cssClasses.itemSelected)&&i.addClass(l.cssClasses.itemSelected).addClass(l.styleClasses.itemSelected)}}(e)),n}},selectTo:function(e){function t(e){!(e.offsetTop>n.element.scrollTop()&&e.offsetTop<n.element.scrollTop()+n.element.height())&&e.scrollIntoView&&e.scrollIntoView(!1)}var n=this,a=n.options,s=this.getItemElem(e),l=[];if(s.length){if(this._selectItemElem(s),function e(t){var i=n._getParent(t);if(i){var s=n._getChildren(i);s.hasClass("hide")&&(s.removeClass("hide"),e(i),i.removeClass(a.tree.cssClasses.collapsed))}}(s),!s.is(n.options.tree.cssClasses.leaf)){var i=n._getChildren(s);if(i)i.hasClass("hide")&&i.removeClass("hide");else if(n.options.delayLoad&&!s.data("isLoadedChildren")){s.data("isLoadedChildren",!0);var o=s.data("itemData")[a.tree.fields.children];v.each(o,function(e,t){var i={isShowForDelayLoad:!0,relativeItem:s};n.bindItem(t,i)})}s.removeClass(a.tree.cssClasses.collapsed)}t(s.get(0))}else if(n.options.delayLoad){!function i(e,s){v.each(e,function(e,t){return t[a.fields.key]==s?(l.push(t),!1):t[a.tree.fields.children]&&t[a.tree.fields.children].length&&(i(t[a.tree.fields.children],s),0<l.length)?(l.push(t),!1):void 0})}(n.element.data("data"),e);for(var r=l.length-1;0<=r;r--){(s=n.getItemElem(l[r][a.fields.key])).length||v.each(l[r+1][a.tree.fields.children],function(e,t){var i=n.getItemElem(l[r+1][a.fields.key]),s={isShowForDelayLoad:!0,relativeItem:i};n.bindItem(t,s),i.data("isLoadedChildren",!0),i.removeClass(a.tree.cssClasses.collapsed)})}0<l.length&&(s=n.getItemElem(l[0][a.fields.key]),n._selectItemElem(s),t(s.get(0)))}},_deselectItemElems:function(e,s){var n=this,a=this.options,l=!1;return e.each(function(e,t){var i=v(this);i.hasClass(a.cssClasses.itemSelected)&&(i.removeClass(a.cssClasses.itemSelected).removeClass(a.styleClasses.itemSelected).removeClass(a.cssClasses.itemPartSelected),null!=s&&1==s||(n._trigger("itemDeselected",null,{itemElem:i,itemData:n.getItemData(i)}),l=!0))}),l},_getSelectedItemElems:function(e){var t=this.options.selectors.itemSelected;return e&&(t+=","+this.options.selectors.itemPartSelected),this.element.findUntil(t,this.options.selectors.widget)},_selectSingle:function(e,t,i,s){var n=!1,a=this.getItemElem(e);return a.length&&(n=this._selectItemElem(a,t,i,s)||n),n},_deselectSingle:function(e,t){var i=this.getItemElem(e);return this._deselectItemElems(i,t)},append:function(e,t,i){var s=this,n={position:"append",isEdit:t,relativeItem:i},a=null;return v.isArray(e)?v.each(e,function(e,t){a=s.bindItem(t,n),i&&i.removeClass(s.options.tree.cssClasses.leaf)}):(a=s.bindItem(e,n),i&&i.removeClass(s.options.tree.cssClasses.leaf)),a},prepend:function(e,t,i){var s={position:"prepend",isEdit:t,relativeItem:i};this.bindItem(e,s)},insert:function(e,t,i){this.bindItem(e,{position:"after",relativeItem:i,isEdit:t})},update:function(e,t){this.bindItem(e,{position:"replace",relativeItem:t,isEdit:!1})},remove:function(e,i){var s=this;v.isArray(e)?v.each(e,function(e,t){s._removeSingle(t,i)}):s._removeSingle(e,i)},_removeSingle:function(e){var t=this.getItemElem(e);this._removeItem(t)},_removeItem:function(e){var t=this;if(t._trigger("beforeItemRemove",null,{itemElem:e}),"true"!=e.attr("isnew")&&(this.removedItemElems.push(e),this.removedItemDatas.push(e.data("itemInitData"))),"tree"==t.options.type){var i=t._getChildren(e);i&&i.remove()}e.remove(),t._trigger("itemRemoved",null,{itemElem:e}),t._total--,t.options.pageable&&t._$pager.jpager("bind",{total:t._total}),t._addEmpty()},editItem:function(e){if(1!=e.attr("isedit")){var t=e.data("itemData");this.bindItem(t,{position:"replace",isEdit:!0,relativeItem:e}).data("inEdit",!0)}},cancelItem:function(e){if("true"==e.attr("isedit")){if(!e.data("inEdit"))return void this._removeItem(e);var t=e.data("itemData");this.bindItem(t,{position:"replace",isEdit:!1,relativeItem:e})}},saveItem:function(e){if("true"==e.attr("isedit")){var t=this.getItemData(e);return this.updateItem(e,t),t}},getItemData:function(e,t,i){return t?v.extend(!i,{},e.data("itemInitData"),this.options.buildItemData(e)):"true"==e.attr("isedit")?v.extend(!i,{},e.data("itemInitData"),this.options.buildItemData(e)):e.data("itemData")},getAll:function(){var e=this,t=this._$itemContainer.findUntil(e.options.selectors.item,e.options.selectors.widget),i=[];return t.each(function(){i.push(e.getItemData(v(this)))}),i},getSelected:function(e){var t=this,i=[];return this._getSelectedItemElems(e).each(function(){i.push(t.getItemData(v(this)))}),i},getChanges:function(i){var s=this,e=[],n=[];return this.getNewItems().each(function(){e.push(s.getItemData(v(this),void 0,i))}),this.getInitItems().each(function(){var e=v(this).data("itemInitData"),t=s.getItemData(v(this),void 0,i);v.jui.utils.jsonEqual(e,t)||n.push(t)}),{added:e,updated:n,removed:s.removedItemDatas}},getItemElem:function(e){var t,i=this;if(i.options,v.jui.utils.isJqObj(e))t=e;else{var s=e;if(v.isPlainObject(e)&&(s=e[this.options.fields.key]),0==(t=v(i.options.selectors.item+'[data-item-key="'+s+'"]',i.element)).length&&v.isArray(i.popChildrenElems))for(var n=0;n<i.popChildrenElems.length&&!(0<(t=v(i.options.selectors.item+'[data-item-key="'+s+'"]',i.popChildrenElems[n])).length);n++);}return t},getFirstLeaf:function(){var e=this._$itemContainer.findUntil(this.options.tree.selectors.leaf,this.options.selectors.widget).first();return{itemElem:e,itemData:e.data("itemData")}},getAllItemElems:function(){var e=this._$itemContainer.findUntil(this.options.selectors.item,this.options.selectors.widget);if(v.isArray(this.popChildrenElems))for(var t=0;t<this.popChildrenElems.length;t++)e.add(this.popChildrenElems[t].findUntil(this.options.selectors.item,this.options.selectors.widget));return e},getNewItems:function(){return this._$itemContainer.findUntil(this.options.selectors.item,this.options.selectors.widget).filter('[isnew="true"]')},getInitItems:function(){return this._$itemContainer.findUntil(this.options.selectors.item,this.options.selectors.widget).filter('[isnew="false"]')},getAllPrevItemElems:function(e){var t=this.options;return this.options.selectors.itemWrapper?this._getItemWrapper(e).prevAll().find(t.selectors.item):e.prevAll()},getAllNextItemElems:function(e){var t=this.options;return this.options.selectors.itemWrapper?this._getItemWrapper(e).nextAll().find(t.selectors.item):e.nextAll()},_toTreeData:function(e){var t,i,s=this.options,n=s.tree.fields.key,a=s.tree.fields.parentKey,l=s.tree.fields.children;if(!n||""==n||!e)return[];if(v.isArray(e)){var o=[],r=[];for(t=0,i=e.length;t<i;t++)r[e[t][n]]=e[t];for(t=0,i=e.length;t<i;t++)r[e[t][a]]&&e[t][n]!=e[t][a]?(r[e[t][a]][l]||(r[e[t][a]][l]=[]),r[e[t][a]][l].push(e[t])):o.push(e[t]);return o}return[e]},_addEmpty:function(){var e=this.options;e.templates.empty&&(0<this._total||v(v.jui.tmpl(e.templates.empty,{})).appendTo(this._$itemContainer).addClass(e.cssClasses.emptyItem))},_removeEmpty:function(){var e=this.options;this._$itemContainer.find(e.selectors.emptyItem).remove()},_refreshCheckerAllState:function(){if(void 0!==this._$checkerAll){var e=this.getAllItemElems();this._getSelectedItemElems().length==e.length?this._$checkerAll.addClass(this.options.cssClasses.checkerAllChecked):this._$checkerAll.removeClass(this.options.cssClasses.checkerAllChecked)}},disableItem:function(e){this.getItemElem(e).addClass("jlist-item-disabled")},enableItem:function(e){this.getItemElem(e).removeClass("jlist-item-disabled")},disable:function(){this.getAllItemElems().each(function(e,t){v(this).addClass("jlist-item-disabled")})},enable:function(){this.getAllItemElems().each(function(e,t){v(this).removeClass("jlist-item-disabled")})}}))}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistMenu",["jquery","./jlist"],e):e(jQuery)}(function(t){t.widget("jui.jlistMenu",t.jui.jlist,{options:{templates:{itemWrapper:"<li></li>",tree:{children:"<ul></ul>"}},mode:"v",fields:{key:"id",text:"text",icon:"icon",url:"url"},cssClasses:{menu:"jlistMenu",menuv:"menu",menuh:"menu-row"},selectable:{multiple:!1,cascade:!0,onlyleaf:!1,selectOnClick:!1},tree:{isListData:!1,indent:30,initCollapseLevel:!1,fields:{children:"children",parentKey:"pid"},toggleOnClick:!0},itemConverter:function(e){return e.text=e[this.options.fields.text],e.key=e[this.options.fields.key],e}},_render:function(){var e=this.options;"tree"==e.type?"h"==e.mode?(e.templates.item=e.templates.item||'<a class="{{if disabled}}jlist-item-disabled{{/if}}" href="{{if url}}{{url}}{{else}}javascript:void(0);{{/if}}"><span>{{if icon}}<i class="{{icon}}"></i> {{/if}}{{text}}</span> {{if !notoggle}}<span class="jlist-item-toggle"></span>{{/if}}</a>',this.options=e=t.extend(!0,{},e,{templates:{tree:{children:'<ul class="box popbox menu tight"></ul>'}},tree:{initCollapseLevel:1,popChildren:!0,popTriggerType:"click",popAppendTo:"body"}})):e.templates.item=e.templates.item||'<a class="hcard {{if disabled}}jlist-item-disabled{{/if}}" href="{{if url}}{{url}}{{else}}javascript:void(0);{{/if}}">{{if icon}}<span class="hcard-hd"><i class="{{icon}}"></i></span>{{/if}}<span class="hcard-bd">{{text}}</span>{{if !notoggle}}<span class="hcard-ft"><span class="jlist-item-toggle"></span></span>{{/if}}</a>':e.templates.item=e.templates.item||'<a class="{{if disabled}}jlist-item-disabled{{/if}}" href="{{if url}}{{url}}{{else}}javascript:void(0);{{/if}}"><span>{{if icon}}<i class="{{icon}}"></i>{{/if}}{{text}}</span></a>',"h"==e.mode?this.element.addClass(e.cssClasses.menuh):"v"==e.mode&&this.element.addClass(e.cssClasses.menuv),this.element.bind("jlistmenuitemcreated",function(e,t){t.itemData.disabled&&t.itemElem.addClass("ui-state-disabled")}),this._super()}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistTabs",["jquery","./jlistMenu"],e):e(jQuery)}(function(o){o.widget("jui.jlistTabs",o.jui.jlistMenu,{options:{mode:"h",styleClass:"jlistMenu-line",activeKey:null},_render:function(){var i=this,l=this.options;this.element.addClass("jlistTabs"),this._super();var e=this.widgetEventPrefix.toLowerCase();this.element.bind(e+"itemdeselected",function(e,t){var i=t.itemData;o("#"+i[l.fields.key]).addClass("hide")}),this.element.bind(e+"itemselected",function(e,t){var i=t.itemData,s=o("#"+i[l.fields.key]);if(i.route){var n=s.data("router");if(n)0==i.cache&&n.refresh();else{var a=i.route;o.isPlainObject(a)||(a={url:i.route}),n=s.jrouter(a).jrouter("instance"),s.data("router",n)}}s.removeClass("hide")}),l.activeKey&&this.element.bind(e+"itemdatabound",function(e,t){i.select(l.activeKey)})}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistSteps",["jquery","./jlistTabs"],e):e(jQuery)}(function(e){e.widget("jui.jlistSteps",e.jui.jlistTabs,{options:{mode:"h",styleClass:"jlistMenu-line",activeKey:null},_render:function(){var a=this;this.options,this.element.addClass("jlistSteps"),this._super();var e=this.widgetEventPrefix.toLowerCase();this.element.bind(e+"itemselected",function(e,t){var i=t.itemElem,s=a.getAllItemElems(),n=a.getAllPrevItemElems(i);s.removeClass("jlistSteps-success"),n.addClass("jlistSteps-success")})}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistGrid",["jquery","jqueryui","./jlist","../utils","../misc/jpager"],e):e(jQuery)}(function(o){o.widget("jui.jlistGrid",o.jui.jlist,{options:{templates:{colgroup:null,thead:null},height:null,tableStyle:null},_create:function(){var e=this,t=this.options;this.element.addClass("jlist-grid"),this.$header=o("<div>").addClass("jlist-grid-header").appendTo(this.element),this.$body=o("<div>").addClass("jlist-grid-body").appendTo(this.element),this.$footer=o("<div>").addClass("jlist-grid-footer").appendTo(this.element),this.$headerTable=o('<table class="table"></table>').appendTo(this.$header),this.$bodyTable=o("<table></table>").appendTo(this.$body).addClass("table");var i=o.jui.tmpl(t.templates.colgroup,{}),s=(o(i).appendTo(this.$headerTable),o.jui.tmpl(t.templates.thead,{}));o(s).appendTo(this.$headerTable),o(i).appendTo(this.$bodyTable),o('<tbody class="jlist-items")></tbody>').appendTo(this.$bodyTable),t.templates.footer&&o(o.jui.tmpl(t.templates.footer,{})).appendTo(this.$footer),t.tableStyle&&(this.$headerTable.addClass(t.tableStyle),this.$bodyTable.addClass(t.tableStyle)),t.pageable&&0==this.$footer.find(t.selectors.pager).length&&o('<div class="jlist-pager"></div>').appendTo(this.$footer),t.height&&(e._setBodyHeight(t.height),e.element.bind("jlistgriddatabound",function(){e._setBodyHeight(t.height)}),o(window).on("resize",function(){e._setBodyHeight(t.height)})),e._scrollBody(),this._super()},_setBodyHeight:function(e){var t=this.element.parent();if("fit"==e){var i=parseFloat(t.css("margin-top"));i||(i=0);var s=parseFloat(t.css("margin-bottom"));s||(s=0),e=o(window).height()-t.offset().top-i-s}e<100&&(e=100),t.outerHeight(e),this.element.outerHeight(t.height());var n=this.$header.outerHeight(!0),a=this.$footer.outerHeight(!0),l=this.element.height()-n-a;this.$body.innerHeight(l,!0)},_scrollBody:function(){var t=this;this.$body.on("scroll",function(){var e=t.$body.scrollLeft();t.$headerTable.css("left",-e)})}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistCommands",["jquery","jqueryui","./jlist"],e):e(jQuery)}(function(s){s.widget("jui.jlistCommands",s.jui.jlist,{options:{fields:{key:"id",text:"text",icon:"icon",url:"url"},type:"tree",target:null,mode:"button",templates:{itemWrapper:"<li></li>",tree:{children:'<ul class="box popbox menu tight"></ul>'}},selectable:{multiple:!1,cascade:!1,cascadeCancelParent:!0,onlyleaf:!1,selectOnClick:!1,singleSelectCanRevert:!1,checkAllElem:!1},tree:{initCollapseLevel:1,popChildren:!0,popTriggerType:"click",popAppendTo:"body",isListData:!1,fields:{children:"children",parentKey:"pid"},toggleOnClick:!0},itemClick:function(e,t){e.preventDefault(),e.stopPropagation();var i=t.itemData;i.command&&s.isFunction(i.command)&&i.command.call(t.inst,t.inst.options.target)}},_render:function(){var e=this.options;this.element.addClass("jlistCommands"),"button"==e.mode?(this.element.addClass("list-inline"),e.styleClass=e.styleClass||"space tighter",this.element.addClass(e.styleClass),e.templates.item=e.templates.item||'<button class="btn {{styleClass}} {{if disabled}}jlist-item-disabled{{/if}}"{{if disabled}} disabled="disabled"{{/if}}>{{if icon}}<i class="{{icon}}"></i>{{/if}} {{text}} {{if !notoggle}}<span class="jlist-item-toggle"></span>{{/if}}</button>',e.templates.tree.subitem=e.templates.tree.subitem||'<a class="{{if disabled}}jlist-item-disabled{{/if}}" href="{{if url}}{{url}}{{else}}javascript:void(0);{{/if}}">                        <span>{{if icon}}<i class="{{icon}}"></i> {{/if}}{{text}}</span>                    {{if !notoggle}}<span class="jlist-item-toggle"></span>{{/if}}</a>'):"menu-row"==e.mode&&(this.element.addClass("menu-row"),e.styleClass=e.styleClass||"tight",this.element.addClass(e.styleClass),e.templates.item=e.templates.item||'<a class="{{styleClass}}{{if disabled}} jlist-item-disabled{{/if}}"{{if onlyIcon}} title="{{text}}"{{/if}}>{{if icon}}<i class="{{icon}}"></i>{{/if}}{{if !onlyIcon}} {{text}}{{/if}}</a>'),this._super()}})}),function(e){"function"==typeof define&&define.amd?define("jui/lists/jlistWithCommands",["jquery","./jlist","./jlistMenu","./jlistCommands"],e):e(jQuery)}(function(e){var t={_jlistCreate:e.jui.jlist.prototype._render,_jlistMenuCreate:e.jui.jlistMenu.prototype._render},i=function(e){return{options:{commands:null},_render:function(){var n=this.options;n.commands&&this.element.bind((this.widgetEventPrefix+"itemDataBound").toLowerCase(),function(e,t){var i=t.itemElem,s=(t.itemData,i.find(".commands"));n.commands.target=t,s.jlistCommands(n.commands)}),e.apply(this,arguments)}}};e.extend(!0,e.jui.jlist.prototype,i(t._jlistCreate)),e.extend(!0,e.jui.jlistMenu.prototype,i(t._jlistMenuCreate))}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jinput",["jquery","jqueryui","../jcomponent","../mixins/dataMixin","../layers/jlayer","../utils"],e):e(jQuery)}(function(o){o.widget("jui.jinput",o.jui.jcomponent,o.extend(!0,{},o.jui.dataMixin,{options:{isInput:!0,hasValue:!0,label:!1,labelAlign:"right",labelClass:null,wrapperClass:null,required:!1,requiredMessage:"必填",viewMode:!0,asyncSetInitValue:!1,invalidTipAlign:"top right",ruleTypes:{number:{validator:function(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},message:"请输入有效的数字"},digits:{validator:function(e){return/^\d+$/.test(e)},message:"只能输入数字"},regex:{validator:function(e,t){return new RegExp(t.pattern,t.attributes).test(e)}},email:{validator:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},message:"请输入有效的 Email 地址"},url:{validator:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},message:"请输入有效的 URL"},min:{validator:function(e,t){return(e=Number(e))>=t},message:"输入值不能小于 {0}"},max:{validator:function(e,t){return(e=Number(e))<=t},message:"输入值不能大于 {0}"},range:{validator:function(e,t){return(e=Number(e))>=t[0]&&e<=t[1]},message:"输入值必须介于 {0} 和 {1} 之间"},minlength:{validator:function(e,t){return(o.isArray(e)?e.length:o.trim(e).length)>=t},message:"不能少于 {0} 个字"},maxlength:{validator:function(e,t){return(o.isArray(e)?e.length:o.trim(e).length)<=t},message:"不能多于 {0} 个字"},rangelength:{validator:function(e,t){var i;return i=o.isArray(e)?e.length:o.trim(e).length,t[0]<=i&&i<=t[1]},message:"输入字数在 {0} 个到 {1} 个之间"},remote:{validator:function(e,t){var i={};return i[t[1]]=e,"true"==o.ajax({url:t[0],dataType:"json",data:i,async:!1,cache:!1,type:"post"}).responseText},message:"Please fix this field"},date:{validator:function(e,t){var i=this.options.dateFormat;t&&0<t.length&&(i=t[0]);var s=!1;try{o.datepicker.parseDate(i,e),s=!0}catch(e){s=!1}return s},message:"请输入有效的日期格式."},identifier:{validator:function(e,t){return/^[a-zA-Z][a-zA-Z0-9_]*$/.test(e)},message:"只能输入字母、数字、下划线且必须以字母开头"},phoneNumber:{validator:function(e,t){return/^1[3|4|5|7|8][0-9]{9}$/.test(e)},message:"请输入正确的手机号"}},rules:[]},_render:function(){var t=this,i=this.options;i.labelAlign||(i.labelAlign="right"),i.labelClass||(i.labelClass="col-sm-2"),i.wrapperClass||(i.wrapperClass="col-sm-10"),this.element.addClass("jinput"),t._getData(function(){if(t.__beforeRender(),i.isGroup||(this.$children=this.element.children().remove()),1==i.showLabel||i.label&&0!=i.showLabel){if(this.element.addClass("form-group").addClass("label-"+i.labelAlign),this.$controlLabel=o('<label class="control-label"></label>').html(i.label).appendTo(this.element),this.$controlWrapper=o('<div class="control-wrapper"></div>').appendTo(this.element),this.$inputWrapper=o('<div class="input-wrapper"></div>').appendTo(this.$controlWrapper),i.required){var e="right"==i.labelAlign?"prepend":"append";this.$controlLabel[e]('<span class="required" aria-required="true"> * </span>')}"top"!=i.labelAlign&&(i.labelClass&&this.$controlLabel.addClass(i.labelClass),i.wrapperClass&&this.$controlWrapper.addClass(i.wrapperClass))}else i.isGroup||(this.$inputWrapper=o('<div class="input-wrapper"></div>').appendTo(this.element));i.isGroup||this.$children&&0<this.$children.length&&this.$children.appendTo(this.$inputWrapper),null!=i.inputWrapperStyleClass&&t.$inputWrapper.addClass(i.inputWrapperStyleClass),null!=i.inputWrapperStyle&&t.$inputWrapper.css(i.inputWrapperStyle),o.isFunction(t._inputRender)&&t._inputRender(),i.asyncSetInitValue||i.transmitData||this.setValue(this.data,!0),this.validateTriggered=!1,this.errorMessage="",this._on(this.widget(),{focusin:function(e){t.invalidTip&&t.invalidTip.show()},focusout:function(e){t.invalidTip&&t.invalidTip.hide()},mouseenter:function(e){t.invalidTip&&t.invalidTip.show()},mouseleave:function(e){t.invalidTip&&(e.target===t.document[0].activeElement||o.contains(e.target,t.document[0].activeElement)||t.invalidTip.hide())}}),t.__afterRender()})},_getValue:o.noop,_setValue:o.noop,_parseValue:o.noop,getValue:function(){return this._getValue()},setValue:function(e,t){void 0===e||o.isPlainObject(e)&&o.isEmptyObject(e)||this._setValue(e,t),t&&(this.initValue=this.getValue(),this.getValueText?this.initValueText=this.getValueText():this.initValueText=null,this.currentValue=this.initValue)},focus:function(){this.widget().focus()},validate:function(){if(1==this.isDisabled())return!0;this.validateTriggered=!0;var e=this._validate();return e?this.element.removeClass("jinput-invalid"):this.element.addClass("jinput-invalid"),e?this.invalidTip&&(this.invalidTip.close(),this.invalidTip=null):(this.invalidTip?this.invalidTip.message(this.errorMessage):this.invalidTip=o.jui.tip.warning({message:this.errorMessage,appendTo:this.element,follow:this.$inputWrapper,align:this.options.invalidTipAlign,attachElem:this.element,autoShow:!1,showClose:!1,style:{margin:0},styleClass:"val-tip"}),(this.element.is(":hover")||this.$inputWrapper.is(":focus"))&&this.invalidTip.show()),e},getInvalids:function(){return this.invalid},_validate:function(){var e=this.options;this.setMessage("");var t=this._getRawValue?this._getRawValue():this.getValue(),i=null!=t&&null!=t&&""!=t;if(e.required&&(null==t||""===t||o.isArray(t)&&t.length<1))return this.setMessage(e.requiredMessage),!1;if(i&&e.rules&&o.isArray(e.rules))for(var s=0;s<e.rules.length;s++)if(!this._checkRule(e.rules[s],t))return!1;return!0},_checkRule:function(e,t){var i=this.options,s=null;if(e.type?s=i.ruleTypes[e.type]:e.validator&&(s=e),s){var n=e.param||null;if(!s.validator.call(this,t,n)){var a=e.message||s.message;if(n){o.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++)a=a.replace(new RegExp("\\{"+l+"\\}","g"),n[l])}return this.setMessage(i.invalidMessage||a),!1}}return!0},setMessage:function(e){this.errorMessage=e},onValueChanged:function(){var e=this.currentValue;this.currentValue=this.getValue(),this._trigger("valueChanged",null,{oldValue:e,newValue:this.currentValue,inst:this}),this.parent&&this.parent.onValueChanged&&this.parent.onValueChanged(),this.validateTriggered&&this.validate()},getChanged:function(e){if(null!=this.options.trackChange&&0==this.options.trackChange)return!1;var t=this.getValue(),i={widget:this.widgetName,name:this.name,label:this.options.label,field:this.name,fieldName:this.options.label,newValue:t};return this.getValueText&&(i.newValueText=this.getValueText()),e?!!t&&(i.oldValue=null,i.oldValueText=null,i):!o.jui.utils.jsonEqual(t,this.initValue)&&(i.oldValue=this.initValue,i.oldValueText=this.initValueText,i)}}))}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jtextbox",["jquery","jqueryui","./jinput"],e):e(jQuery)}(function(s){s.widget("jui.jtextbox",s.jui.jinput,{options:{inputType:"text",iconClass:null,iconAlign:"left",placeHolder:null,button:null,suffix:null},_inputRender:function(){var e=this,t=this.options;if(this.element.addClass("jtextbox"),t.iconClass&&(this.$icon=s("<i></i>").addClass(t.iconClass).appendTo(this.$inputWrapper),this.element.addClass("with-icon").addClass("icon-"+t.iconAlign)),this.$input=s('<input class="form-control" />').appendTo(this.$inputWrapper),this.$input.attr("type",t.inputType),t.placeHolder&&this.$input.attr("placeholder",t.placeHolder),"password"==t.inputType?this.$input.attr("autocomplete","new-password"):this.$input.attr("autocomplete","off"),t.disabled&&this.disable(),this._on(this.$input,{focus:function(){e.validating=!0,e.value=e._getRawValue(),function(){e.validating&&(e.value!=e._getRawValue()&&(e.value=e._getRawValue(),e.onValueChanged()),setTimeout(arguments.callee,200))}()},blur:function(){e.validating=!1,e._trigger("blur",null,{inst:e})}}),t.button){t.button=s.extend({type:"button",align:"after"},t.button),this.$inputWrapper.addClass("input-group"),this.$button=s('<button class="btn"></button>').addClass(t.button.styleClass).attr("type",t.button.type).text(t.button.text);var i=s('<span class="input-group-btn"></span>').append(this.$button);"before"==t.button.align?i.prependTo(this.$inputWrapper):i.appendTo(this.$inputWrapper),this._on(this.$button,{click:function(){t.button.click.call(e)}})}t.suffix&&(this.$inputWrapper.addClass("input-group"),this.$suffix=s('<span class="input-group-addon"></span>').html(t.suffix).appendTo(this.$inputWrapper))},getValue:function(){return this.$input.val()},_getRawValue:function(){return this.$input.val()},_setValue:function(e,t){this.currentValue=this.$input.val(),this.$input.val(e),t||e!=this.currentValue&&this.onValueChanged()},focus:function(){this.$input.focus()},_setOption:function(e,t){"disabled"===e&&this.$input.prop("disabled",!!t),this._super(e,t)}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jtextarea",["jquery","jqueryui","./jinput"],e):e(jQuery)}(function(i){i.widget("jui.jtextarea",i.jui.jinput,{options:{placeHolder:null,rows:3},_inputRender:function(){var e=this,t=this.options;this.element.addClass("jtextarea"),this.$input=i('<textarea class="form-control"></textarea>').appendTo(this.$inputWrapper),t.placeHolder&&this.$input.attr("placeholder",t.placeHolder),t.rows&&this.$input.attr("rows",t.rows),this.$input.attr("autocomplete","off"),t.disabled&&this.disable(),this._on(this.$input,{focus:function(){e.validating=!0,e.value=e._getRawValue(),function(){e.validating&&(e.value!=e._getRawValue()&&(e.value=e._getRawValue(),e.onValueChanged()),setTimeout(arguments.callee,200))}()},blur:function(){e.validating=!1}})},getValue:function(){return this.$input.val()},_getRawValue:function(){return this.$input.val()},_setValue:function(e){this.$input.val(e)},focus:function(){this.$input.focus()},_setOption:function(e,t){"disabled"===e&&this.$input.prop("disabled",!!t),this._super(e,t)}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jnumberbox",["jquery","jqueryui","./jtextbox"],e):e(jQuery)}(function(i){i.widget("jui.jnumberbox",i.jui.jtextbox,{options:{min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:""},_inputRender:function(){var e=this,t=[];this.element.addClass("jnumberbox"),0==this.options.precision&&t.push({type:"regex",param:{pattern:"^(\\-|\\+)?(0|[1-9][0-9]*)$"},message:"请输入整数"}),0<this.options.precision&&t.push({type:"regex",param:{pattern:"^(\\-|\\+)?(0|[1-9][0-9]*)(\\.\\d{"+this.options.precision+"})$"},message:"请输入 "+this.options.precision+" 位小数"}),this.options.min&&t.push({type:"min",param:this.options.min}),this.options.max&&t.push({type:"max",param:this.options.max}),this.options=i.extend(!0,{},this.options,{rules:t}),this._super(),this.$input.on("blur",function(){e._trigger("blur",null,{inst:e})})},getValue:function(){var e=this.$input.val();return e=parseFloat(e).toFixed(this.options.precision),isNaN(e)&&(e=null),e}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jcheckbox",["jquery","jqueryui","./jinput"],e):e(jQuery)}(function(e){e.widget("jui.jcheckbox",e.jui.jinput,{options:{labelFollow:!1},_beforeCreate:function(){this.options.labelFollow&&(this.options.showLabel=!1)},_inputRender:function(){this.element.addClass("jcheckbox"),this.$label=e("<label></label>").appendTo(this.$inputWrapper),this.$input=e('<input type="checkbox" />').appendTo(this.$label),this.options.labelFollow&&this.$label.append(this.options.label),this.options.disabled&&this.disable()},getValue:function(){return this.$input.prop("checked")},_setValue:function(e){this.$input.prop("checked",e)},disable:function(){this.$input.prop("disabled",!0),this.options.disabled=!0},enable:function(){this.$input.prop("disabled",!1),this.options.disabled=!1},focus:function(){this.$input.focus()},_setOption:function(e,t){"disabled"===e&&this.$input.prop("disabled",!!t)}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jradiolist",["jquery","jqueryui","../utils","../lists/jlist","../forms/jinput"],e):e(jQuery)}(function(n){n.widget("jui.jradiolist",n.jui.jinput,{options:{fields:{text:"text",value:"value"},sourceList:{fields:{key:"value"}},mode:null},_inputRender:function(){var i=this,e=this.options;this.element.addClass("jradiolist");var t='<ul class="jlist-items"></ul>',s='<li><label><input type="radio" value="{{value}}"> {{text}}</label></li>';"button"==e.mode&&(t='<div class="btn-group jlist-items" role="group">',s='<button class="btn">{{text}}</button>'),e.sourceList=n.extend(!0,{styleClasses:{itemContainer:"list-inline tight"},fields:{key:e.fields.value},templates:{layout:t,item:s}},e.sourceList,{itemConverter:function(e){return i._itemConverter(e)},itemSelected:function(e,t){i._renderSelected(t.itemData)},selectionChanged:function(){i.onValueChanged()}}),this.$inputWrapper.jlist(this.options.sourceList)},refresh:function(e){this.$inputWrapper.jlist("bind",e)},_renderSelected:function(e){function i(e){e=t._itemConverter(e),t.$inputWrapper.find("input").val([e.value])}var t=this;this.options,e?n.isArray(e)?n.each(e,function(e,t){i(t)}):i(e):this.$inputWrapper.find("input").prop("checked",!1)},getSelected:function(){return this.$inputWrapper.jlist("getSelected")},getValue:function(){var e=this.options,t=this.getSelected();return t.length?t[0][e.fields.value]:null},getValueText:function(){var e=this.options,t=this.getSelected();return t.length?t[0][e.fields.text]:null},_setValue:function(e,t){var i=this;if(!e)return this.$inputWrapper.jlist("deselectAll"),void this._renderSelected(null);this.$inputWrapper.jlist("select",e,{notFireEvent:t,callback:function(){t&&(n.isPlainObject(e)||(e=i.$inputWrapper.jlist("getSelected")),i._renderSelected(e))}})},_itemConverter:function(e){var t=this.options.fields;return!("text"in e)&&(e.text=e[t.text]),!("value"in e)&&(e.value=e[t.value]),e},disable:function(){this.$inputWrapper.jlist("disable"),this.$inputWrapper.find("input").prop("disabled",!0),this.options.disabled=!0},enable:function(){this.$inputWrapper.jlist("enable"),this.$inputWrapper.find("input").prop("disabled",!1),this.options.disabled=!1}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jcheckboxlist",["jquery","jqueryui","../utils","../lists/jlist","./jinput"],e):e(jQuery)}(function(s){s.widget("jui.jcheckboxlist",s.jui.jinput,{options:{fields:{text:"text",value:"value"},sourceList:{styleClasses:{itemContainer:"list-inline tight"},selectable:{multiple:!0,onlyleaf:!1,cascade:!0},tree:{indent:20,fields:{children:"children",parentKey:"pid"},valueIncludePart:!0},method:"GET",templates:{layout:'<ul class="jlist-items list tight"></ul>',tree:{children:'<ul class="list tight"></ul>'}}}},_inputRender:function(){var i=this,e=this.options;this.element.addClass("jcheckboxlist");var t=e.sourceList.templates.item||'<li><input type="checkbox" value="{{value}}"> <label>{{text}}</label></li>';"tree"==e.sourceList.type&&(e.sourceList.styleClasses={itemContainer:"tight"}),e.sourceList=s.extend(!0,{},e.sourceList,{fields:{key:e.fields.value},templates:{item:t},selectable:{cascadeCancelParent:!1},itemConverter:function(e){return i._itemConverter(e)},itemSelected:function(e,t){i._renderSelected(t.itemData)},itemDeselected:function(e,t){t.itemElem.find("input").prop("checked",!1)},selectionChanged:function(){i.onValueChanged()}}),this.cascade=e.sourceList.selectable.cascade,this.$inputWrapper.jlist(this.options.sourceList),this.sourceList=this.$inputWrapper.jlist("instance")},refresh:function(e){this.$inputWrapper.jlist("bind",e)},_renderSelected:function(e){function i(e){e=t._itemConverter(e),t.$inputWrapper.find('input[value="'+e.value+'"]').prop("checked",!0)}var t=this;this.options,void 0!==e&&null!=e&&""!=e?s.isArray(e)?s.each(e,function(e,t){i(t)}):i(e):this.$inputWrapper.find("input").prop("checked",!1)},_deselect:function(e){this.options,this.options.multiple&&this.$multipleDisplay.jlist("remove",e)},getSelected:function(){var e="tree"==this.sourceList.options.type&&1==this.sourceList.options.tree.valueIncludePart;return this.sourceList.getSelected(e)},getValue:function(){var i=this.options,e=this.getSelected();return s.map(e,function(e,t){return e[i.fields.value]})},getValueText:function(){var i=this.options,e=this.getSelected();return s.map(e,function(e,t){return e[i.fields.text]}).toString()},_setValue:function(e,t){var i=this;if(!e)return this.$inputWrapper.jlist("deselectAll"),void this._renderSelected(null);t&&this.$inputWrapper.jlist("option","selectable.cascade",!1),this.$inputWrapper.jlist("select",e,{notFireEvent:t,callback:function(){t&&(i.$inputWrapper.jlist("option","selectable.cascade",i.cascade),s.isPlainObject(e)||(e=i.$inputWrapper.jlist("getSelected")),i._renderSelected(e))}})},_itemConverter:function(e){var t=this.options.fields;return!("text"in e)&&(e.text=e[t.text]),!("value"in e)&&(e.value=e[t.value]),e},disable:function(){this.$inputWrapper.jlist("disable"),this.$inputWrapper.find("input").prop("disabled",!0),this.options.disabled=!0},enable:function(){this.$inputWrapper.jlist("enable"),this.$inputWrapper.find("input").prop("disabled",!1),this.options.disabled=!1}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jselect",["jquery","jqueryui","../utils","../lists/jlist","./jinput"],e):e(jQuery)}(function(l){l.widget("jui.jselect",l.jui.jinput,{options:{fields:{text:"text",value:"value",filter:"q"},value:null,styleClass:"jselect-default",emptyData:null,sourceList:{method:"GET",templates:{itemWrapper:"<li></li>",item:'<a href="javascript:;">{{text}}</a>'},styleClasses:{itemContainer:"menu active-highlight"}},selectedList:{templates:{item:"<li>{{text}}</li>"}},singleTemplate:"{{text}}",multiple:!1,showArrow:!0,pop:{trigger:null,layer:{fitElem:".jselect-list",size:{maxHeight:"fit"}}},searchPlaceholder:"",remoteSearch:!1,autocomplete:!0,minItemsForSearch:20,filterConverter:null,delay:300},_inputRender:function(){var n=this,a=this.options;this.element.addClass("jselect"),this.$selectInput=l('<select class="jselect-select"><option value=""></option></select>').appendTo(this.$inputWrapper),this.$wrapper=this.$inputWrapper,this.$display=l('<div class="jselect-display"></div>').appendTo(this.$wrapper),a.multiple?(this.$selectInput.attr("multiple","multiple"),this.$multipleDisplay=l('<div class="jselect-display-multiple"><ul class="jlist-items"></ul></div>').appendTo(this.$display),a.selectedList=l.extend({},{fields:{key:a.fields.value}},a.selectedList),this.$multipleDisplay.jlist(a.selectedList)):this.$singleDisplay=l('<div class="jselect-display-single"></div>').appendTo(this.$display),a.showArrow&&(this.$displayArrow=l('<span class="jselect-display-arrow"><i class="fa fa-angle-down"></i></span>').appendTo(this.$display)),this.$popLayer=l('<div class="jselect-pop"><div class="jselect-search"></div><div class="jselect-list"><ul class="jlist-items"></ul></div></div>').appendTo(this.$wrapper),this.$sourceList=this.$popLayer.find(".jselect-list"),this.$search=this.$popLayer.find(".jselect-search");var e={placeholder:a.searchPlaceholder};a.pageable&&(this.$pager=l("<div></div>").addClass("jselect-pager").insertAfter(this.$sourceList)),a.autocomplete||(e.button={text:"search"}),this.popMinWidth=n.$display.outerWidth(),this.$pop=this.$display,this.options.disabled&&this.disable();var t=l.extend(!0,{},a.pop,{layerElem:n.$popLayer,layer:{size:{maxHeight:"fit",width:Math.max(220,n.popMinWidth)}},disabled:a.disabled});if(a.remoteSearch&&n.$search.show(),this.$pop.jpop(t),a.autocomplete?e.valueChanged=function(e,t){n._search(t.newValue)}:e.button.click=function(){n._search(this.getValue())},this.$search.jtextbox(e),a.sourceList=l.extend(!0,{},{fields:{key:a.fields.value}},a.sourceList,{selectable:{multiple:a.multiple},pageable:!!a.pageable&&l.extend(!0,a.pageable,{el:this.$pager,displayItemCount:0,edgeItemCount:0,texts:{info:" "}}),dataBound:function(e,t){n.$popLayer.jlayer("setSize"),n.$popLayer.jlayer("setPosition");var i,s=t.data;a.emptyData&&n.$sourceList.jlist("prepend",a.emptyData).jlist("select",a.emptyData),l.isArray(s)?i=s:s&&(i=s[l(this).jlist("option").fields.items]),l.isArray(i)||(i=[]),a.remoteSearch||(-1!=a.minItemsForSearch&&i.length>a.minItemsForSearch?n.$search.show():n.$search.hide()),n._renderOptions(i),a.pageable&&a.multiple&&l.each(n.$multipleDisplay.jlist("getAll"),function(e,t){n.$sourceList.jlist("select",t,!0)})},itemSelected:function(e,t){n._renderSelected(t.itemData),n._setSelectInputValue(),a.multiple||n.$pop.jpop("hide"),n._trigger("select",e,t)},itemDeselected:function(e,t){n._deselect(t.itemData),n._setSelectInputValue(),n._trigger("deselect",e,t)},selectionChanged:function(){n.onValueChanged()},itemConverter:function(e){return n._itemConverter(e)}}),"tree"==a.sourceList.type){a.sourceList=l.extend({},a.sourceList,{cssClasses:{styleClass:"jlist-tree"}})}this.$sourceList.jlist(a.sourceList)},_itemConverter:function(e){var t=this.options.fields;return!("text"in e)&&(e.text=e[t.text]),!("value"in e)&&(e.value=e[t.value]),e},_renderSelected:function(e){function i(e){e=t._itemConverter(e),s.multiple?t.$multipleDisplay.jlist("append",e):(t.$singleDisplay.html(l.jui.tmpl(s.singleTemplate,e)).attr("title",e.text),t.$singleDisplay.data("itemData",e))}var t=this,s=this.options;e?l.isArray(e)?l.each(e,function(e,t){i(t)}):i(e):s.multiple?t.$multipleDisplay.jlist("bind",null):(t.$singleDisplay.html(""),t.$singleDisplay.data("itemData",e))},_renderOptions:function(e){l.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t],s=i[this.options.fields.text];"string"!==l.type(s)&&(s=JSON.stringify(s));var n=i[this.options.fields.value];"string"!==l.type(n)&&(n=JSON.stringify(n));var a=l('<option value="'+n+'"></option>');a.text(s),this.$selectInput.append(a)}},_deselect:function(e){this.options.multiple&&this.$multipleDisplay.jlist("remove",e)},deselect:function(e){this.options.remoteSearch?(this._deselect(e),this._setSelectInputValue(),this._trigger("deselect",null,{itemData:e})):this.$sourceList.jlist("deselect",e)},getSelected:function(){if(this.options.multiple)return this.$multipleDisplay.jlist("getAll");var e=this.$singleDisplay.data("itemData");return e?[e]:[]},_setValue:function(e,t){var i=this;if(void 0===e||null==e)return this.$sourceList.jlist("deselectAll"),void this._renderSelected(null);this.options.remoteSearch?(this._renderOptions(e),this._renderSelected(e),this._setSelectInputValue()):this.$sourceList.jlist("select",e,{notFireEvent:t,callback:function(){t&&(l.isPlainObject(e)||(e=i.$sourceList.jlist("getSelected")),i._renderSelected(e),i._setSelectInputValue())}})},getValue:function(){var i=this.options,e=this.getSelected(),t=l.map(e,function(e,t){return e[i.fields.value]});return t.length?i.multiple?t:t[0]:null},getValueText:function(){var i=this.options,e=this.getSelected(),t=l.map(e,function(e,t){return e[i.fields.text]});return t.length?i.multiple?t.toString():t[0]:null},_setSelectInputValue:function(){var e=this.getValue();this.$selectInput.val(e)},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e={};e[this.options.fields.filter]=t,this.$sourceList.jlist("bind",{filter:e})},this.options.delay)},_search:function(e){var s=this;if(this.options.remoteSearch)this._searchTimeout(e);else{var n=new RegExp(e,"i");this.$sourceList.jlist("getAllItemElems").each(function(e,t){var i=s.$sourceList.jlist("getItemData",l(t));n.test(i.text)?l(t).show():l(t).hide()})}},getSourceList:function(){return this.$sourceList},widget:function(){return this.$wrapper},_setOption:function(e,t){"disabled"===e&&this.$display.toggleClass("ui-state-disabled",!!t),this._super(e,t)}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jdatepicker",["jquery","jqueryui","./jtextbox"],e):e(jQuery)}(function(s){s.widget("jui.jdatepicker",s.jui.jtextbox,{options:{inputType:"text",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearRange:"c-100:c+50"},_inputRender:function(){var t=this,i=this.options;this._super(),this.element.addClass("jdatepicker"),this.$inputWrapper.addClass("input-group"),this.$icon=s('<div class="input-group-addon"><i class="fa fa-calendar" /></div>').appendTo(this.$inputWrapper),i.onSelect=function(){t.onValueChanged()},i.onClose=function(){try{var e=s.datepicker.parseDate(i.dateFormat,t.$input.val());t.$input.val(s.datepicker.formatDate(i.dateFormat,e))}catch(e){t.$input.val(s.datepicker.formatDate(i.dateFormat,t.$input.datepicker("getDate")))}t._trigger("closed",null,null)},this.$input.datepicker(i),this._on(this.$icon,{click:function(e){e&&e.preventDefault?e.preventDefault():e.returnValue=!1,this.$input.attr("disabled","disabled"),this.$input.datepicker("show"),this.$input.removeAttr("disabled")}})},getValue:function(){return this.$input.val()},_setValue:function(e){this.$input.datepicker("setDate",e)},openPicker:function(){this.$input.datepicker("show")}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jinputgroup",["jquery","jqueryui","./jinput","../mixins/compositMixin"],e):e(jQuery)}(function(n){n.widget("jui.jinputgroup",n.jui.jinput,n.extend(!0,{},n.jui.compositMixin,{options:{transmitData:!0,flatData:!1,isGroup:!0},_beforeCreate:function(){this.options.label=null},_inputRender:function(){this._renderChildren()},_getValue:function(){if(this.components&&this.components.length){for(var e={},t=0;t<this.components.length;t++){var i=this.components[t],s=this["$"+i.name];s&&s.options.isInput&&(s.options.flatData?n.extend(e,s.getValue()):e[i.name]=s.getValue())}return e}},_setValue:function(e,t){var i=this;if(this.options,i.components&&i.components.length)for(var s=0;s<i.components.length;s++){var n=i["$"+i.components[s].name];if(n&&n.options.isInput){var a=n.options;e.hasOwnProperty(a.name)&&(a.flatData?n.setValue(e,t):n.setValue(e[a.name],t))}}},validate:function(){for(var e=this.invalid=[],t=0;t<this.components.length;t++){var i=this["$"+this.components[t].name];i&&i.options.isInput&&(i.isHidden()||i.validate()||e.push(i))}return 0<e.length&&e[0].focus(),0==e.length},getChild:function(e){return this["$"+e]},getInvalids:function(){return this.invalid},getChanged:function(e){for(var t=[],i=0;i<this.components.length;i++){var s=this["$"+this.components[i].name];if(s&&!s.isHidden()&&s.options.isInput){var n=s.getChanged(e);n&&t.push(n)}}return t},disable:function(){for(var e=0;e<this.components.length;e++){var t=this["$"+this.components[e].name];t&&n.isFunction(t.disable)&&t.disable()}},enable:function(){for(var e=0;e<this.components.length;e++){var t=this["$"+this.components[e].name];t&&n.isFunction(t.enable)&&t.enable()}}}))}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jinputrepeat",["jquery","jqueryui","./jinput","./jinputgroup","../utils"],e):e(jQuery)}(function(p){p.widget("jui.jinputrepeat",p.jui.jinput,{options:{itemComponents:[],getDataMode:"getChanges",layoutMode:"table",keyField:"Id"},_inputRender:function(){var o=this,r=this.options;this.removeItemData=[];var e=r.templates&&r.templates.layout||"",t=r.templates&&r.templates.item||"",i=r.templates&&r.templates.edit||"";if("table"==r.layoutMode){e='<table class="jlist-table table table-bordered"><thead><tr>',t="<tr>";for(var s=0;s<r.itemComponents.length;s++){e+="<td>"+(n=r.itemComponents[s]).label+"</td>",t+=p.jui.utils.format('<td><div name="{0}"></div></td>',n.name),n.showLabel=!1}e+="<td></td>",t+='<td><button class="btn btn-xs" data-command="remove"><i class="fa fa-close"></i></button></td>',e+='</tr></thead><tbody class="jlist-items"></tbody></table>',e+='<button class="btn" type="button" data-role="AddBtn">添加</button>',i=t+="</tr>"}else if("flow"==r.layoutMode){e='<div class="jlist-items"></div><div><button class="btn" type="button" data-role="AddBtn">添加</button></div>',t='<div class="m-y-md b-b">';for(s=0;s<r.itemComponents.length;s++){var n=r.itemComponents[s];t+=p.jui.utils.format('<div name="{0}"></div>',n.name)}i=t+="</div>"}this.list=this.$inputWrapper.jlist({initEdit:!0,templates:{layout:e,item:t,edit:i},itemDataBound:function(e,t){var i=t.itemElem,s=p.extend(!0,[],r.itemComponents);i.jinputgroup({components:s,data:t.itemData,isRepeatInit:t.isInit}).jinputgroup("instance").parent=o},beforeItemRemove:function(e,t){for(var i={},s=t.itemElem.jinputgroup("instance"),n=0;n<r.itemComponents.length;n++){var a=r.itemComponents[n],l=s["$"+a.name];l.getValueText?i[a.name]=l.getValueText():i[a.name]=l.getValue()}o.removeItemData.push(i)},buildItemData:function(e){return e.jinputgroup("getValue")},itemCommand:function(e,t){"remove"==t.command&&(p(this).jlist("remove",t.itemElem),o.onValueChanged())}}).jlist("instance"),this._on(this._find('[data-role="AddBtn"]'),{click:function(){o.$inputWrapper.jlist("append",{},!0),o.onValueChanged()}})},validate:function(){for(var e=[],t=this.$inputWrapper.jlist("getAllItemElems"),i=0;i<t.length;i++){var s=t[i];p(s).jinputgroup("validate")||e.push(p(s).jinputgroup("getInvalids"))}return 0==e.length},getValue:function(){return"getChanges"==this.options.getDataMode?this.$inputWrapper.jlist("getChanges"):this.$inputWrapper.jlist("getAll")},_setValue:function(e,t){this.$inputWrapper.jlist("bindData",e)},getChanged:function(){var e=this.options,t={widget:this.widgetName,name:this.name,label:e.label,added:[],updated:[],removed:this.removeItemData},i=this.list.getNewItems();if(0<i.length)for(var s=0;s<i.length;s++){var n=p(i[s]),a={id:null};a.changed=n.jinputgroup("getChanged",!0),t.added.push(a)}var l=this.list.getInitItems();if(0<l.length)for(s=0;s<l.length;s++){var o=p(l[s]),r=o.jinputgroup("getChanged");if(0<r.length){var u=this.list.getItemData(o),d={};d.key=u[e.keyField],d.changed=r,t.updated.push(d)}}return(0<t.added.length||0<t.updated.length||0<t.removed.length)&&t}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jtagbox",["jquery","./jinput"],e):e(jQuery)}(function(a){a.widget("jui.jtagbox",a.jui.jinput,{options:{},_changeToContent:function(e){var t=this,i=a("<span>×</span>").css({color:"#999",cursor:"pointer",display:"inline-block","font-weight":"bold","margin-right":"2px"}).on("click",function(){a(this).parent().remove(),t.onValueChanged()});a("<li>").text(e).prepend(i).insertBefore(this.$inputArea).css({"list-style":"none",padding:0,margin:0,float:"left","background-color":"#e4e4e4",border:"1px solid #aaa","border-radius":"4px",cursor:"default","margin-right":"5px","margin-top":"5px",padding:"0 5px"}).addClass("inputContent")},_getValue:function(){var i=[];return this.$inputList.find(".inputContent").each(function(){var e=a(this).text(),t=e.substr(1,e.length-1);i.push(t)}),0<i.length?i:null},_bindEvents:function(){var n=this;this._on(this.$container,{click:function(e){n.$inputList.last().find("input").focus()},focusin:function(e){},focusout:function(e){}}),this._on(this.$input,{input:n.inputEvent=function(e){var t=a(e.target);t.css("width",(1<1*t.val().length?1*t.val().length:1)+"em")},keydown:n.keydownEvent=function(e){if(13==e.keyCode){var t=a(e.target);n._changeToContent(t.val());var i=this.$baseInput.clone();t.replaceWith(i),n._on(i,{input:n.inputEvent,keydown:n.keydownEvent}),i.focus(),n.onValueChanged()}else if(8==e.keyCode){if(""===(t=a(e.target)).val()){e.preventDefault();var s=t.parent().prev().text();t.parent().prev().remove(),t.val(s.substr(1,s.length-1)),t.css("width",(1<1*t.val().length?1*t.val().length:1)+"em"),n.onValueChanged()}}}})},_domConstructor:function(){this.$container=a("<span>").css({width:"100%","border-radius":"4px",display:"block",padding:0}).addClass("form-control").appendTo(this.$inputWrapper),this.$inputList=a("<ul>").addClass("inputList").appendTo(this.$container).css({"list-style":"none",padding:0,margin:0,display:"inline-block",width:"100%",padding:"0 0 0 5px"}),this.$input=a("<input>").css({background:"transparent",border:"none",outline:0,"box-shadow":"none","-webkit-appearance":"textfield",width:"1.5em"}),this.$baseInput=this.$input.clone(),this.$inputArea=a("<li>").append(this.$input).appendTo(this.$inputList).css({"list-style":"none",float:"left","padding-top":"6px"})},_setValue:function(e){e&&0<e.length&&a.each(e,a.proxy(function(e,t){this._changeToContent(t)},this))},focus:function(){this.$inputList.children().last().find("input").focus()},_inputRender:function(){this._domConstructor(),this._bindEvents()}})}),function(e){"function"==typeof define&&define.amd?define("jui/forms/jformCommands",["jquery","jqueryui","./jinput","../lists/jlistCommands"],e):e(jQuery)}(function(e){e.widget("jui.jformCommands",e.jui.jinput,{options:{isInput:!1,commands:{}},_inputRender:function(){var e=this.options;this.$inputWrapper.jlistCommands(e.commands)}})}),"function"==typeof define&&define(["jui/utils","jui/mixins/compositMixin","jui/mixins/dataMixin","jui/mixins/templateMixin","jui/jcomponent","jui/jtmpl","jui/misc/jpager","jui/misc/jcollapse","jui/layers/jlayer","jui/layers/jpop","jui/layers/jlayer.modal","jui/layers/jlayer.alert","jui/layers/jlayer.tip","jui/utils.ajax","jui/spa","jui/lists/jlist","jui/lists/jlistMenu","jui/lists/jlistTabs","jui/lists/jlistSteps","jui/lists/jlistGrid","jui/lists/jlistCommands","jui/lists/jlistWithCommands","jui/forms/jinput","jui/forms/jtextbox","jui/forms/jtextarea","jui/forms/jnumberbox","jui/forms/jcheckbox","jui/forms/jradiolist","jui/forms/jcheckboxlist","jui/forms/jselect","jui/forms/jdatepicker","jui/forms/jinputrepeat","jui/forms/jinputgroup","jui/forms/jtagbox","jui/forms/jformCommands"]);